<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="renderer" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link rel="dns-prefetch" href="https://hejueyun.github.io"><title>tcp-ip协议 | 烏巢</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="1. 概述  协议族  T C P &#x2F; I P协议族是一组不同的协 议组合在一起构成的协议族。尽管通常称该协议族为 T C P &#x2F; I P，但T C P和I P只是其中的两种协议而已"><meta property="og:type" content="article"><meta property="og:title" content="tcp-ip协议"><meta property="og:url" content="https://hejueyun.github.io/posts/2f4ac1e5/index.html"><meta property="og:site_name" content="烏巢"><meta property="og:description" content="1. 概述  协议族  T C P &#x2F; I P协议族是一组不同的协 议组合在一起构成的协议族。尽管通常称该协议族为 T C P &#x2F; I P，但T C P和I P只是其中的两种协议而已"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-17-18-35-29.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-17-18-43-27.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-17-19-46-57.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-19-09-53-00.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-19-10-03-38.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-19-11-03-28.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-19-13-08-18.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-19-14-09-09.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-19-15-26-08.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-19-15-46-32.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-19-15-48-47.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-19-20-11-08.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-19-20-38-47.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-19-20-42-17.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-19-21-41-41.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-19-21-42-09.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-19-22-00-09.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-19-22-05-37.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-19-23-32-22.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-23-14-43-47.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-20-08-23-41.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-21-10-10-54.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-21-10-13-30.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-21-10-27-28.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-21-10-41-25.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-23-14-16-56.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-23-14-17-59.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-23-14-32-26.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-23-14-41-18.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-23-14-41-32.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-23-16-38-35.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-23-16-47-19.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-23-16-48-38.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-23-16-52-08.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-23-17-00-21.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-23-21-38-23.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-23-21-49-12.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-24-16-18-05.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-24-16-18-48.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-24-21-33-13.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-24-21-43-33.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-24-21-52-56.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-25-09-00-22.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-25-09-03-39.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-25-09-16-37.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-25-09-20-25.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-25-09-20-58.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-25-09-25-47.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-25-10-43-52.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-25-10-54-08.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-25-10-56-17.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-25-11-00-28.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-25-16-26-25.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-25-16-30-57.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-25-16-34-09.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-25-12-52-53.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-26-13-36-16.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-26-13-45-53.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-26-13-53-44.png"><meta property="og:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-26-13-56-06.png"><meta property="article:published_time" content="2020-08-17T17:09:32.000Z"><meta property="article:modified_time" content="2021-12-06T10:59:06.806Z"><meta property="article:author" content="何决云"><meta property="article:tag" content="Notes"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://hejueyun.github.io/posts/2f4ac1e5/2020-08-17-18-35-29.png"><link rel="alternative" href="/atom.xml" title="烏巢" type="application/atom+xml"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon-16x16.png"><link rel="manifest" href="/assets/img/site.webmanifest"><link rel="mask-icon" href="/assets/img/safari-pinned-tab.svg" color="#5bbad5"><link rel="shortcut icon" href="/assets/img/favicon.ico"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" type="text/css" href="/./main.0cf68a.css"><link rel="stylesheet" type="text/css" href="/./txbh.css"><style type="text/css">#container.show {
          background: repeating-linear-gradient(200deg,#592c3a,#592c3a 30px,#3f4e61 0,#3f4e61 60px);
        }</style><meta name="generator" content="Hexo 6.0.0"></head></html><html><body><div id="container" q-class="show:isCtnShow"><canvas id="anm-canvas" class="anm-canvas"></canvas><div class="left-col" q-class="show:isShow"><div class="overlay"></div><div class="intrude-less"><header id="header" class="inner"><a href class="profilepic"><img src="/assets/img/portrait.webp" class="js-avatar"></a><hgroup><h1 class="header-author"><a href></a></h1></hgroup><nav class="header-menu"><ul><li><a href="/">主页</a></li><li><a href="/photos">相册</a></li><li><a href="/tags/essay">随笔</a></li><li><a href="/categories">目录</a></li><li><a href="/archives/index.html">存档</a></li></ul></nav><nav>Total 242</nav><nav class="header-smart-menu"><a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">Search </a><a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">AboutMe</a></nav><nav class="header-nav"><div class="social"><a class="rss" target="_blank" href="/atom.xml" title="rss"><i class="icon-rss"></i></a></div></nav></header></div></div><div class="mid-col" q-class="show:isShow,hide:isShow|isFalse"><nav id="mobile-nav"><div class="overlay js-overlay"></div><div class="btnctn js-mobile-btnctn"><div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div></div><div class="intrude-less"><header id="header" class="inner"><div class="profilepic"><img src="/assets/img/portrait.webp" class="js-avatar"></div><hgroup><h1 class="header-author js-header-author"></h1></hgroup><nav class="header-nav"><div class="social"><a class="rss" target="_blank" href="/atom.xml" title="rss"><i class="icon-rss"></i></a></div></nav><nav class="header-menu js-header-menu"><ul style="width: 70%"><li style="width: 20%"><a href="/">主页</a></li><li style="width: 20%"><a href="/photos">相册</a></li><li style="width: 20%"><a href="/tags/essay">随笔</a></li><li style="width: 20%"><a href="/categories">目录</a></li><li style="width: 20%"><a href="/archives/index.html">存档</a></li></ul></nav></header></div><div class="mobile-mask" style="display:none" q-show="isShow"></div></nav><div id="wrapper" class="body-wrap"><div class="menu-l"><div class="canvas-wrap"><canvas data-colors="#eaeaea" data-sectionheight="100" data-contentid="js-content" id="myCanvas1" class="anm-canvas"></canvas></div><div id="js-content" class="content-ll"><article id="post-tcp-ip协议" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">tcp-ip协议</h1><a href="/posts/2f4ac1e5/" class="archive-article-date"><time datetime="2020-08-17T17:09:32.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-08-17</time></a></header><div class="article-entry" itemprop="articleBody"><h2 id="概述">1. 概述</h2><img loading="lazy" src="/posts/2f4ac1e5/2020-08-17-18-35-29.png" width height="250"><p>协议族</p><blockquote><p>T C P &#x2F; I P协议族是一组不同的协 议组合在一起构成的协议族。尽管通常称该协议族为 T C P &#x2F; I P，但T C P和I P只是其中的两种协议而已</p></blockquote><span id="more"></span><h3 id="端系统和中间系统">1.1. 端系统和中间系统</h3><blockquote><p>端系统（ End system）（两边的两台主机）和中间系统（Intermediate system）（中间的路由器）。应用层和运输层使用<strong>端到端（En d - t o - e n d）协议</strong>。在 图中，只有端系统需要这两层协议。但是，网络层提供的却是<strong>逐跳（ Ho p - b y - h o p）协议</strong>，两 个端系统和每个中间系统都要使用它</p></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-17-18-43-27.png" width height="200"><blockquote><p>一个路由器具有两个或多个网络接口层（因为它连接了两个或多个网络）</p><hr><p>一个主机也可以有多个<strong>接口</strong>， 但一般不称作路由器 , 除非它的功能只是单纯地把分组从一个接口传送到另一个接口。同样， 路由器并不一定指那种在互联网中用来转发分组的特殊硬件盒。大多数的 T C P &#x2F; I P实现也允许 一个多接口主机来担当路由器的功能，但是主机为此必须进行特殊的配置。在这种情况下， 我们既可以称该系统为主机（当它运行某一应用程序时，如 F T P或Te l n e t），也可以称之为路 由器（当它把分组从一个网络转发到另一个网络时）。在不同的场合下使用不同的术语</p></blockquote><p>互联网的目的之一是在应用程序中隐藏所有的物理细节</p><ul><li>路由器<ul><li>在网络层上对网络进行互连</li></ul></li><li>网桥<ul><li>在链路层上对网络进行互连</li><li>这样对上层来说就 好像是一个局域网</li></ul></li></ul><h3 id="TCP-x2F-IP的分层">1.2. TCP&#x2F;IP的分层</h3><img loading="lazy" src="/posts/2f4ac1e5/2020-08-17-19-46-57.png" width height="350"><blockquote><ul><li>尽管I C M P主要被I P使用，但应用程序也有可能访问它。我 们将分析两个流行的诊断工具，P i n g和Tr a c e r o u t e</li><li>I G M P是I n t e r n e t组管理协议。它用来把一个U D P数据报多播到多个主机</li><li>A R P（地址解析协议）和R A R P（逆地址解析协议）是某些网络接口（如以太网和令牌环 网）使用的特殊协议，用来转换 I P层和网络接口层使用的地址</li></ul></blockquote><h3 id="封装">1.3. 封装</h3><blockquote><ul><li>T C P传给I P的数据单元称作 T C P报文段或简称为T C P段（T C P s e g m e n t）。<ul><li>U D P数据与T C P数据基本一致。唯一的不同是 U D P传给I P的信息单元称作 U D P数据报<br>（UDP datagram），而且U D P的首部长为8字节</li></ul></li><li>I P传给网络接口层的数据单元称作I P数据报(IP datagram)。</li><li>通过以太网传输的比特 流称作帧(Fr a m e )<ul><li>以太网数据帧的物理特性是其长度必须在 4 6～1 5 0 0字节之间</li></ul></li></ul></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-19-09-53-00.png" width height="300"><h3 id="分用（Demultiplexing）">1.4. 分用（Demultiplexing）</h3><img loading="lazy" src="/posts/2f4ac1e5/2020-08-19-10-03-38.png" width height="250"><blockquote><p>当目的主机收到一个以太网数据帧时，数据就开始从协议栈中由底向上升，同时去掉各层协议加上的报文首部。每层协议盒都要去检查报文首部中的协议标识，以确定接收数据的上层协议</p></blockquote><h3 id="端口号">1.5. 端口号</h3><blockquote><p>任何TCP&#x2F;IP实现所提供的服务都用知名的1~1023之间的端口号。这些知名端口号由Internet号分配机构(Internet Assigned Numbers Authority, IANA)来管理</p></blockquote><h3 id="应用编程接口">1.6. 应用编程接口</h3><ul><li>socket</li><li>TLI(运输层接口)</li></ul><h2 id="链路层">2. 链路层</h2><h3 id="作用">2.1. 作用</h3><ul><li>为IP模块发送和接收IP数据报;</li><li>为ARP模块发送ARP请求和接收ARP应答;</li><li>为RARP发送RARP请求和接收RARP应答。TCP&#x2F;IP支持多种不同的链路层协议，这取决于网络所使用的硬件</li></ul><h3 id="封装-1">2.2. 封装</h3><ul><li>RFC 894: 以太网封装</li><li>RFC 1042: IEEE 802</li></ul><blockquote><p>最常使用的封装格式是RFC 894定义的格式</p></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-19-11-03-28.png" width height="250"><h3 id="回环接口">2.3. 回环接口</h3><blockquote><p>大多数的产品都支持环回接口(Loopback Interface，以<strong>允许运行在同一台主机上的客户程序和服务器程序通过TCP&#x2F;IP进行通信</strong>。A类网络号127就是为环回接口预留的。根据惯例，大多数系统把IP地址<strong>127.0.0.1</strong>分配给这个接口，并命名为localhost。一个传给环回接口的IP数据报不能在任何网络上出现</p></blockquote><p>回环接口处理IP数据的过程</p><img loading="lazy" src="/posts/2f4ac1e5/2020-08-19-13-08-18.png" width height="300"><blockquote><p>看上去用传输层和IP层的方法来处理环回数据似乎效率不高，但它简化了设计，因为环<br>回接口可以被看作是网络层下面的另一个链路层。网络层把一份数据报传送给环回接口，就像传给其他链路层一样，只不过环回接口把它返回到IP的输入队列中</p></blockquote><h3 id="最大传输单元MTU">2.4. 最大传输单元MTU</h3><ul><li>以太网：1500</li><li>802.3：1492</li></ul><blockquote><p>在同一个网络上的两台主机互相进行通信时，该网络的MTU是非常重要的。但是如果两台主机之间的通信要通过多个网络，那么每个网络的链路层就可能有不同的MTU。重要的不是两台主机所在网络的MTU的值，重要的是<strong>两台通信主机路径中的最小MTU</strong>。它被称作<strong>路径MTU</strong></p><hr><ul><li>两台主机之间的路径MTU不一定是个常数</li><li>选路不一定对称<ul><li>从A到B的路由可能与从B到A的路由不同</li></ul></li></ul></blockquote><h2 id="IP-网际协议">3. IP:网际协议</h2><h3 id="特性">3.1. 特性</h3><ul><li><strong>不可靠</strong>(unreliable)<ul><li><strong>IP不能保证IP数据报能成功地到达目的地</strong>。IP仅提供最好的传输服务。如果发生某种错误时，如某个路由器暂时用完了缓冲区，IP有一个简单的错误处理算法:<strong>丢弃该数据报，然后发送ICMP消息报给信源端</strong>。任何要求的可靠性必须由上层来提供(如TCP)</li></ul></li><li><strong>无连接</strong>(connectionless)<ul><li><strong>IP并不维护任何关于后续数据报的状态信息。每个数据报的处理是相互独立的</strong>。这也说明，IP数据报可以不按发送顺序接收。如果一信源向相同的信宿发送两个连续的数据报(先是A，然后是B)，<strong>每个数据报都是独立地进行路由选择，可能选择不同的路线，因此B可能在A到达之前先到达</strong></li></ul></li></ul><h3 id="IP首部">3.2. IP首部</h3><blockquote><p>普通的IP首部长为20个字节，除非含有选项字段</p></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-19-14-09-09.png" width height="200"><ul><li>个字节的32 bit值以下面的次序传输：首先是0～7 bit，其次8～15 bit，然后1 6～23 bit，最后是24~31 bit。这种传输次序称作big endian字节序</li><li>服务类型（TOS）字段包括一个3 bit的优先权子字段（现在已被忽略），4 bit的TOS子字段和1 bit未用位但必须置0。4 bit的TOS分别代表：<ul><li>最小时延</li><li>最大吞吐量</li><li>最高可靠性</li><li>最小费用</li></ul></li><li>总长度字段是IP首部中必要的内容，因为一些数据链路（如以太网）需要填充一些数据以达到最小长度</li><li>T T L（t i m e - t o - l i v e）生存时间字段设置了数据报可以经过的最多路由器数。它指定了数据报的生存时间<ul><li>当该字段的值为0时，数据报就被丢弃，并发送I C M P报文通知源主机</li></ul></li></ul><h4 id="校验和">3.2.1. 校验和</h4><blockquote><p>为了计算一份数据报的I P检验和，首先把检验和字段置为0。然后，对首部中每个16 bit进行二进制反码求和（整个首部看成是由一串16 bit的字组成），结果存在检验和字段中。当收到一份I P数据报后，同样对首部中每个16 bit进行二进制反码的求和。由于接收方在计算过程中包含了发送方存在首部中的检验和，因此，如果首部在传输过程中没有发生任何差错，那么接收方计算的结果应该为全1。如果结果不是全1（即检验和错误），那么IP就丢弃收到的数据报。<strong>但是不生成差错报文，由上层去发现丢失的数据报并进行重传</strong>。</p></blockquote><h3 id="IP路由器">3.3. IP路由器</h3><blockquote><p>I P层既可以配置成路由器的功能，也可以配置成主机的功能。</p><p>本质上的区别在于主机从不把数据报从一个接口转发到另一个接口，而路由器则要转发数据报</p></blockquote><h4 id="路由表">3.3.1. 路由表</h4><p>路由表中的每一项都包含下面这些信息：</p><ul><li>目的IP地址</li><li>下一站（跳）路由器的IP地址</li><li>标志<ul><li>一个标志指明目的I P地址是网络地址还是主机地址</li><li>另一个标志指明下一站路由器是否为真正的下一站路由器，还是一个直接相连的接口</li></ul></li><li>为数据报的传输指定一个网络接口</li></ul><p>网络号与主机号</p><p>32位IP地址 &#x3D; 8位网络号 + 24位主机号</p><p>工作流程</p><ul><li>搜索路由表，寻找能与目的I P地址完全匹配的表目（网络号和主机号都要匹配）</li><li>搜索路由表，寻找能与目的网络号相匹配的表目</li><li>搜索路由表，寻找标为“默认（d e f a u l t）”的表目。如果找到，则把报文发送给该表目指定的下一站路由器</li></ul><h3 id="子网寻址">3.4. 子网寻址</h3><blockquote><p>现在所有的主机都要求支持子网编址（RFC 950）。不是把IP地址看成由单纯的一个网络号和一个主机号组成，<strong>而是把主机号再分成一个子网号和一个主机号</strong>。</p><ul><li>这样做的原因是因为A类和B类地址为主机号分配了太多的空间</li></ul></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-19-15-26-08.png" width height="100"><blockquote><ul><li>子网对外部路由器来说隐藏了内部网络组织的细节</li><li>子网划分缩减了路由表的规模</li></ul></blockquote><h4 id="x类地址">3.4.1. x类地址</h4><ul><li><p>A 类IP地址</p><ul><li>一个A类IP地址由1字节的网络地址和3字节主机地址组成，网络地址的最高位必须是“0”，地址范围从 1.0.0.0 到126.0.0.0。可用的 A 类网络有126个，每个网络能容纳1677214个主机。</li></ul></li><li><p>B类IP地址</p><ul><li>一个B类 IP 地址由 2 个字节的网络地址和2个字节的主机地址组成，网络地址的最高位必须是“10”，地址范围从128.0.0.0 到191.255.255.255。可用的B类网络有 16382个，每个网络能容纳 6 万多个主机。</li></ul></li><li><p>C类IP地址</p><ul><li>C类IP地址包含私有C类地址，地址的表示范围为：192.0.0.0~223.255.255.255。C类地址分配给小型网络，如一般的局域网和校园网，它可连接的主机数量是最少的，采用把所属的用户分为若干的网段进行管理。</li><li>C类网络用前三组数字表示网络的地址，最后一组数字作为网络上的主机地址。C类地址默认子网掩码为255.255.255.0。</li></ul></li><li><p><a target="_blank" rel="external nofollow noopener noreferrer" href="http://blog.sina.com.cn/s/blog_aafb158a0102vgel.html">【网络例题2】已知IP地址和子网掩码 求网络号、子网号、主机号_碎叶草人_新浪博客</a></p></li></ul><h3 id="子网掩码">3.5. 子网掩码</h3><blockquote><p>给定IP地址和子网掩码以后，主机就可以确定IP数据报的目的是</p><ul><li>(1)本子网上的主机</li><li>(2)本网络中其他子网中的主机</li><li>(3)其他网络上的主机</li></ul></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-19-15-46-32.png" width height="150"><h3 id="特殊情况的IP地址">3.6. 特殊情况的IP地址</h3><img loading="lazy" src="/posts/2f4ac1e5/2020-08-19-15-48-47.png" width height="200"><blockquote><p>将来或许会有更多的主机和网络，但是为了不让主机跨越不同的网络就得使用不同的子网号。我们的解决方法是把子网号从8 bit扩充到11 b i t，把主机号从8 bit减为5 bit。这就叫作变长子网，因为1 4 0 . 2 5 2网络中的大多数子网都采用8 bit子网掩码，而我们的子网却采用11 bit的子网掩码</p><p>并不是所有的路由选择协议在交换目的网络时也交换子网掩码。在第1 0章中，我们将看到R I P不支持变长子网，R I P第2版和O S P F则支持变长子网</p></blockquote><p>netstat命令</p><p>这个命令打印出每个接口的M T U、输入分组数、输入错误、输出分组数、输出错误、冲突以及当前的输出队列长度</p><h2 id="ARP地址解析协议">4. ARP地址解析协议</h2><ul><li>ARP为IP地址到对应的硬件地址之间提供动态映射。我们之所以用动态这个词是因为这个过程是自动完成的，一般应用程序用户或系统管理员不必关心<ul><li>从逻辑I n t e r n e t地址到对应的物理硬件地址需要进行翻译。这就是A R P的功能</li></ul></li><li>RARP是被那些没有磁盘驱动器的系统使用</li></ul><h3 id="ARP高速缓存">4.1. ARP高速缓存</h3><blockquote><p>A R P高效运行的关键是由于每个主机上都有一个A R P高速缓存。这个高速缓存存放了最近I n t e r n e t地址到硬件地址之间的映射记录。</p><ul><li>高速缓存中每一项的生存时间一般为20分</li></ul></blockquote><ul><li><code>arp -a</code>,参数-a的意思是显示高速缓存中所有的内容</li><li><code>arp -d</code>删除ARP高速缓存中的某一项内容</li></ul><h3 id="ARP的分组格式">4.2. ARP的分组格式</h3><img loading="lazy" src="/posts/2f4ac1e5/2020-08-19-20-11-08.png" width height=" 100"><ul><li>目的地址为全1的特殊地址是广播地址</li><li>ARP请求或回答检验ARP高速缓存是空的连接无效的服务器键入Ctrl和右括号，使Telnet回到提示符并关闭下载的数据帧长都是4 2字节（2 8字节的A R P数据，1 4字节的以太网帧头），因此，每一帧都必须加入填充字符以达到以太网的最小长度要求：60字节(不包括4个字节的以太网帧尾)</li></ul><p>对不存在主机的ARP请求</p><ul><li>ARP请求是在网上广播</li></ul><h3 id="ARP代理">4.3. ARP代理</h3><blockquote><p>如果A R P请求是从一个网络的主机发往另一个网络上的主机，那么连接这两个网络的路由器就可以回答该请求，这个过程称作<strong>委托ARP</strong>或<strong>ARP代理(Proxy ARP)</strong></p></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-19-20-38-47.png" width height="250"><ul><li>路由器netb识别出该IP地址属于它的一个拔号主机，于是把它的以太网接口地址140.252.1作为硬件地址来回答</li></ul><h3 id="免费ARP">4.4. 免费ARP</h3><blockquote><p>是指主机发送ARP查找自己的I P地址。通常，它发生在系统引导期间进行接口配置的时候</p></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-19-20-42-17.png" width height="60"><ul><li>一个主机可以通过它来确定另一个主机是否设置了相同的I P地址。主机并不希望对此请求有一个回答</li><li>如果发送免费ARP的主机正好改变了硬件地址（很可能是主机关机了，并换了一块接口卡，然后重新启动），那么这个分组就可以使其他主机高速缓存中旧的硬件地址进行相应的更新</li></ul><h2 id="ICMP：Internet控制报文协议">5. ICMP：Internet控制报文协议</h2><blockquote><p>I C M P经常被认为是I P层的一个组成部分。它传递差错报文以及其他需要注意的信息。</p><p>I C M P报文通常被I P层或更高层协议（T C P或U D P）使用。一些I C M P报文把差错报文返回给用户进程。</p></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-19-21-41-41.png" width height="120"> <img loading="lazy" src="/posts/2f4ac1e5/2020-08-19-21-42-09.png" width height="150"><h3 id="类型">5.1. 类型</h3><ul><li>查询报文</li><li>差错报文</li></ul><img loading="lazy" src="/posts/2f4ac1e5/2020-08-19-22-00-09.png" width height="100"><p>ICMP差错报文对广播分组响应所带来的广播风暴</p><h3 id="ICMP时间戳请求">5.2. ICMP时间戳请求</h3><blockquote><p>I C M P时间戳请求允许系统向另一个系统查询当前的时间。返回的建议值是自午夜开始计算的毫秒数，协调的统一时间（Coordinated Universal Time, UTC）</p></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-19-22-05-37.png" width height="250"><h3 id="ICMP端口不可达差错">5.3. ICMP端口不可达差错</h3><blockquote><p>UDP的规则之一是，如果收到一份U D P数据报而目的端口与某个正在使用的进程不相符，那么UDP返回一个ICMP不可达报文</p></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-19-23-32-22.png" width height="200"><ul><li>8字节：源端口号、目的端口号</li></ul><h3 id="ICMP不可达差错（需要分片）">5.4. ICMP不可达差错（需要分片）</h3><blockquote><p>当路由器收到一份需要分片的数据报，而在I P首部又设置了不分片（D F）的标志比特。如果某个程序需要判断到达目的端的路途中最小M T U是多少—称作路径MTU发现机制，那么这个差错就可以被该程序使用</p></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-23-14-43-47.png" width height="200"><h2 id="Ping程序">6. Ping程序</h2><blockquote><p>几年前我们还可以作出这样没有限定的断言，如果不能P i n g到某台主机，那么就不能Te l n e t或F T P到那台主机。随着I n t e r n e t安全意识的增强，出现了提供访问控制清单的路由器和防火墙，那么像这样没有限定的断言就不再成立了。一台主机的可达性可能不只取决于I P层是否可达，还取决于使用何种协议以及端口号。P i n g程序的运行结果可能显示某台主机不可达，但我们可以用Te l n e t远程登录到该台主机的25号端口（邮件服务器）</p></blockquote><p>ICMP回显请求和回显应答报文</p><img loading="lazy" src="/posts/2f4ac1e5/2020-08-20-08-23-41.png" width height="150"><blockquote><p>Unix系统在实现ping程序时是把ICMP报文中的标识符字段置成发送进程的ID号。这样即使在同一台主机上同时运行了多个ping程序实例，ping程序也可以识别出返回的信息</p><p>序列号从0开始，每发送一次新的回显请求就加1。p i n g程序打印出返回的每个分组的序列号，允许我们查看是否有分组丢失、失序或重复</p><hr><p>旧版本的p i n g程序每秒发送一个回显请求，并打印出返回的每个回显应答。</p><p>新版本的p i n g程序只发送一个回显请求。如果收到回显应答，则输出“host is alive”；否则，在2 0秒内没有收到应答就输出“no answer（没有回答）”</p></blockquote><p>输出</p><ul><li>当返回I C M P回显应答时，要打印出序列号和T T L，并计算往返时间（T T L位于I P首部中的生存时间字段）</li><li>通常，第1个往返时间值要比其他的大。这是由于目的端的硬件地址不在A R P高速缓存中</li></ul><h3 id="IP记录路由选项">6.1. IP记录路由选项</h3><blockquote><p>Ping程序为我们提供了查看IP记录路由（RR）选项的机会</p><p>它使得ping程序在发送出去的I P数据报中设置I PR R选项（该I P数据报包含I C M P回显请求报文）。这样，每个处理该数据报的路由器都把它的I P地址放入选项字段中。当数据报到达目的端时，I P地址清单应该复制到I C M P回显应答中，这样返回途中所经过的路由器地址也被加入清单中</p><p>最大的问题是I P首部中只有有限的空间来存放I P地址。我们从图3 - 1可以看到，I P首部中的首部长度字段只有4 bit，因此整个I P首部最长只能包括1 5个32 bit长的字（即6 0个字节）。由于I P首部固定长度为2 0字节，R R选项用去3个字节，这样只剩下3 7个字节（6 0-2 0-3）来存放I P地址清单，也就是说只能存放9个I P地址</p></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-21-10-10-54.png" width height="150"><ul><li>ptr称作指针字段。它是一个基于1的指针，指向存放下一个IP地址的位置。它的最小值为4，指向存放第一个IP地址的位置<ul><li>随着每个I P地址存入清单，p t r的值分别为8，1 2，1 6，最大到3 6。当记录下9个I P地址后，p t r的值为4 0，表示清单已满</li></ul></li></ul><img loading="lazy" src="/posts/2f4ac1e5/2020-08-21-10-13-30.png" width height="120"><h2 id="IP选路">7. IP选路</h2><h3 id="路由守护程序">7.1. 路由守护程序</h3><img loading="lazy" src="/posts/2f4ac1e5/2020-08-21-10-27-28.png" width height="250"><ul><li>当接收到ICMP重定向，报文时，路由表也要被更新</li></ul><h3 id="选路原理">7.2. 选路原理</h3><p>netstat对于一个给定的路由器，可以打印出五种不同的标志（flag）:</p><ul><li>U: 该路由可以使用。</li><li>G: 该路由是到一个网关（路由器）。如果没有设置该标志，说明目的地是直接相连的。</li><li>H: 该路由是到一个主机，也就是说，目的地址是一个完整的主机地址。如果没有设置该标志，说明该路由是到一个网络，而目的地址是一个网络地址：一个网络号，或者网络号与子网号的组合。</li><li>D: 该路由是由重定向报文创建的</li><li>M: 该路由已被重定向报文修改</li></ul><img loading="lazy" src="/posts/2f4ac1e5/2020-08-21-10-41-25.png" width height="100"><ul><li>标志G是非常重要的，因为由它区分了间接路由和直接路由（对于直接路由来说是不设置标志G的）。其区别在于，发往直接路由的分组中不但具有指明目的端的IP地址，还具有其链路层地址。当分组被发往一个间接路由时，IP地址指明的是最终的目的地，但是链路层地址指明的是网关（即下一站路由器）</li><li>H标志表明，目的地址是一个完整的主机地址。没有设置H标志说明<strong>目的地址</strong>是一个<strong>网络地址（主机号部分为0）</strong></li><li>参考记数Refcnt（Reference count）列给出的是正在使用路由的活动进程个数。面向连接的协议如TCP在建立连接时要固定路由。如果在主机svr4和slip之间建立Telnet连接，可以看到参考记数值变为1。建立另一个Telnet连接时，它的值将增加为2，依此类推。</li></ul><h2 id="UDP：用户数据报协议">8. UDP：用户数据报协议</h2><ul><li>UDP不提供可靠性：它把应用程序传给I P层的数据发送出去，但是并不保证它们能到达目的地</li></ul><img loading="lazy" src="/posts/2f4ac1e5/2020-08-23-14-16-56.png" width height="150"> <img loading="lazy" src="/posts/2f4ac1e5/2020-08-23-14-17-59.png" width height="200"><ul><li>由于I P层已经把I P数据报分配给T C P或U D P（根据I P首部中协议字段值），因此T C P端口号由T C P来查看，而U D P端口号由U D P来查看。T C P端口号与U D P端口号是相互独立的<ul><li>尽管相互独立，如果T C P和U D P同时提供某种知名服务，两个协议通常选择相同的端口号。这纯粹是为了使用方便，而不是协议本身的要求</li></ul></li></ul><h3 id="UDP检验和">8.1. UDP检验和</h3><blockquote><p>I C M P、I G M P、U D P和T C P都采用相同的检验和算法，尽管T C P和U D P除了本身的首部和数据外，在I P首部中还包含不同的字段</p></blockquote><ul><li>U D P的检验和是可选的，而T C P的检验和是必需的</li><li>I P首部的检验和只覆盖I P的首部—并不覆盖I P数据报中的任何数据。</li><li>U D P数据报的长度可以为奇数字节，但是检验和算法是把若干个16 bit字相加。解决方法是必要时在最后增加填充字节0，这只是为了检验和的计算（也就是说，可能增加的填充字节不被传送）。</li><li>UDP数据报和T C P段都包含一个1 2字节长的伪首部，它是为了计算检验和而设置的。伪首部包含I P首部一些字段。其目的是让U D P两次检查数据是否已经正确到达目的地</li></ul><h4 id="伪首部">8.1.1. 伪首部</h4><blockquote><p>伪首部(pseudo header)，通常有TCP伪首部和UDP伪首部。在UDP&#x2F;TCP伪首部中，包含32位源IP地址，32位目的IP地址，8位填充0，8位协议，16位TCP&#x2F;UDP长度。通过伪首部的校验</p><p>伪首部并非TCP&amp;UDP数据报中实际的有效成分。伪首部是一个虚拟的数据结构，<strong>其中的信息是从数据报所在IP分组头的分组头中提取的，既不向下传送也不向上递交，而仅仅是为计算校验和</strong>。这样的校验和，既校验了TCP&amp;UDP用户数据的源端口号和目的端口号以及TCP&amp;UDP用户数据报的数据部分，又检验了IP数据报的源IP地址和目的地址。</p><p><strong>伪报头保证TCP&amp;UDP数据单元到达正确的目的地址。</strong></p></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-23-14-32-26.png" width height="250"><h3 id="IP分片">8.2. IP分片</h3><blockquote><p>物理网络层一般要限制每次发送数据帧的最大长度。任何时候I P层接收到一份要发送的I P数据报时，它要判断向本地哪个接口发送数据（选路），并查询该接口获得其M T U。I P把M T U与数据报长度进行比较，如果需要则进行分片。分片可以发生在原始发送端主机上，也可以发生在中间路由器上</p><p>新组装由目的端的IP层来完成，其目的是使分片和重新组装过程对运输层（T C P和U D P）是透明的，除了某些可能的越级操作外</p><hr><p>尽管IP分片过程看起来是透明的，但有一点让人不想使用它：<strong>即使只丢失一片数据也要重传整个数据报</strong>。为什么会发生这种情况呢？<strong>因为IP层本身没有超时重传的机制——由更高层来负责超时和重传</strong>（TCP有超时和重传机制，但UDP没有。一些UDP应用程序本身也执行超时和重传）</p></blockquote><ul><li><em>这也意谓着UDP最大数据报长度写死不能分片?</em></li></ul><img loading="lazy" src="/posts/2f4ac1e5/2020-08-23-14-41-18.png" width height="200"><p>tcpdump</p><img loading="lazy" src="/posts/2f4ac1e5/2020-08-23-14-41-32.png" width height="100"><h2 id="UDP和ARP之间的交互作用">9. UDP和ARP之间的交互作用</h2><blockquote><p>在第一个A R P应答返回以前，总共产生了6个A R P请求。我们认为其原因是I P很快地产生了6个数据报片，而每个数据报片都引发了一个A R P请求</p><p>第二，在接收到第一个A R P应答时（第7行），只发送最后一个数据报片（第9行）！看来似乎将前5个数据报片全都丢弃了。实际上，这是A R P的正常操作。在大多数的实现中，在等待一个A R P应答时，只将最后一个报文发送给特定目的主机</p><hr><p>Host Requirements RFC要求实现中必须防止这种类型的<strong>ARP洪泛</strong>（ARP flooding即以高速率重复发送到同一个I P地址的A R P请求）。建议最高速率是每秒一次。而这里却在4.3 ms内发出了6个ARP请求。</p><p>Host Requirements RFC规定，ARP应该保留至少一个报文，而这个报文必须是最后一个报文。这正是我们在这里所看到的结果</p></blockquote><h2 id="最大UDP数据报长">10. 最大UDP数据报长</h2><ul><li>第一，应用程序可能会受到其程序接口的限制。socket API提供了一个可供应用程序调用的函数，以设置接收和发送缓存的长度。对于UDP socket，这个长度与应用程序可以读写的最大U D P数据报的长度直接相关。现在的大部分系统都默认提供了可读写大于8 1 9 2字节的U D P数据报（使用这个默认值是因为8 1 9 2是NFS读写用户数据数的默认值）。</li><li>第二个限制来自于T C P &#x2F; I P的内核实现。可能存在一些实现特性（或差错），使I P数据报长度小于6 5 5 3 5字节</li></ul><h2 id="广播和多播">11. 广播和多播</h2><blockquote><p>使用广播的问题在于它增加了对广播数据不感兴趣主机的处理负荷。拿一个使用U D P广播应用作为例子。如果网内有5 0个主机，但仅有2 0个参与该应用，每次这2 0个主机中的一个发送U D P广播数据时，其余3 0个主机不得不处理这些广播数据报。一直到U D P层，收到的U D P广播数据报才会被丢弃。这3 0个主机丢弃U D P广播数据报是因为这些主机没有使用这个目的端口。</p><p>多播的出现减少了对应用不感兴趣主机的处理负荷。使用多播，主机可加入一个或多个多播组。这样，网卡将获悉该主机属于哪个多播组，然后仅接收主机所在多播组的那些多播帧</p><hr><p>对于以太网，当地址中最高字节的最低位设置为1时表示该地址是一个多播地址，用十六进制可表示为0 1 : 0 0 : 0 0 : 0 0 : 0 0 : 0 0（以太网广播地址ff : ff : ff : ff : ff : ff可看作是以太网多播地址的特例）</p></blockquote><h3 id="指向网络的广播">11.1. 指向网络的广播</h3><blockquote><p>指向网络的广播地址是主机号为全1的地址。A类网络广播地址为n e t i d . 2 5 5 . 2 5 5 . 2 5 5，其中n e t i d为A类网络的网络号</p></blockquote><h3 id="指向子网的广播">11.2. 指向子网的广播</h3><blockquote><p>指向子网的广播地址为主机号为全1且有特定子网号的地址。作为子网直接广播地址的I P地址需要了解子网的掩码。例如，如果路由器收到发往1 2 8 . 1 . 2 . 2 5 5的数据报，当B类网络第12章广播和多播使用1 2 8 . 1的子网掩码为2 5 5 . 2 5 5 . 2 5 5 . 0时，该地址就是指向子网的广播地址；但如果该子网的掩码为2 5 5 . 2 5 5 . 2 5 4 . 0，该地址就不是指向子网的广播地址</p></blockquote><p>应用程序必须支持广播</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sun % ping 255.255.255.255/usr/etc/ping: unknown host 255.255.255.255</span><br></pre></td></tr></table></figure><h2 id="DNS：域名系统">12. DNS：域名系统</h2><blockquote><p>域名系统（D N S）是一种用于T C P &#x2F; I P应用程序的<strong>分布式数据库</strong>，它提供<strong>主机名字</strong>和<strong>IP地址</strong>之间的转换<strong>及有关电子邮件的选路信息</strong></p><hr><p>DNS的一个基本特性是使用超高速缓存。即当一个名字服务器收到有关映射的信息（主机名字到I P地址）时，它会将该信息存放在高速缓存中。这样若以后遇到相同的映射请求，就能直接使用缓存中的结果而无需通过其他服务器查询。1 4 . 7节显示了一个使用高速缓存的例子</p></blockquote><h3 id="DNS的报文格式">12.1. DNS的报文格式</h3><blockquote><p>DNS定义了一个用于查询和响应的报文格式</p></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-23-16-38-35.png" width height="250"><ul><li>标识字段由客户程序设置并由服务器返回结果<ul><li>QR 是1 bit字段：0表示查询报文，1表示响应报文</li><li>TC是1 bit字段，表示“可截断的( t r u n c a t e d )”。使用U D P时，它表示当应答的总长度超过5 1 2字节时，只返回前5 1 2个字节</li></ul></li></ul><img loading="lazy" src="/posts/2f4ac1e5/2020-08-23-16-47-19.png" width height="100"><h4 id="DNS查询报文中的问题部分">12.1.1. DNS查询报文中的问题部分</h4><img loading="lazy" src="/posts/2f4ac1e5/2020-08-23-16-48-38.png" width height="200"><ul><li>不像我们已经看到的许多其他报文格式，该字段无需以整32 bit边界结束，即无需填充字节</li><li>每个标识符以首字节的计数值来说明随后标识符的字节长度，每个名字以最后字节为0结束，长度为0的标识符是根标识符。</li></ul><img loading="lazy" src="/posts/2f4ac1e5/2020-08-23-16-52-08.png" width height="150"><h4 id="DNS响应报文中的资源记录部分">12.1.2. DNS响应报文中的资源记录部分</h4><blockquote><p>DNS报文中最后的三个字段，回答字段、授权字段和附加信息字段，均采用一种称为资源记录R R（Resource Record）的相同格式</p></blockquote><h3 id="指针查询">12.2. 指针查询</h3><blockquote><p><strong>给定一个I P地址，返回与该地址对应的域名</strong></p></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-23-17-00-21.png" width height="100"><ul><li>第1行显示标识符为1，期望递归标志设置为1（加号“+”）</li><li>查询类型为P T R（应注意：问号“？”表示它是一个查询而不是响应）</li><li>44字节的数据包括1 2字节的D N S报文首部、28字节的域名标识符和4字节的查询类型和查询类</li></ul><h3 id="资源记录">12.3. 资源记录</h3><ul><li><code>A</code>: 一个A记录定义了一个I P地址，它存储32 bit的二进制数。</li><li><code>P T R</code>: 指针记录用于指针查询。I P地址被看作是i n - a d d r . a r p a域下的一个域名（标识符串）。</li><li><code>C N A M E</code>:这表示“规范名字(canonical name)”。它用来表示一个域名（标识符串），而有规范名字的域名通常被称为别名( a l i a s )</li><li><code>M X</code>: 邮件交换记录</li><li><code>N S</code>: 名字服务器记录。它说明一个域的授权名字服务器。它由域名表示（符号串）。</li></ul><h3 id="TCP-vs-UDP">12.4. TCP vs UDP</h3><blockquote><p>注意到D N S名字服务器使用的熟知端口号无论对U D P还是T C P都是5 3。这意味着D N S均支持U D P和T C P访问，但我们使用t c p d u m p观察的所有例子都是采用U D P</p><p>名字解析器发出一个查询请求，并且返回响应中的T C（删减标志）比特被设置为1时，它就意味着响应的长度超过了5 1 2个字节，而仅返回前512个字节。在遇到这种情况时，名字解析器通常使用TCP重发原来的查询请求，它将允许返回的响应超过512个字节。既然TCP能将用户的数据流分为一些报文段，它就能用多个报文段来传送任意长度的用户数据。</p></blockquote><h3 id="一个例子">12.5. 一个例子</h3><blockquote><p>先启动Rlogin 客户程序，然后连接到一个位于其他域的Rlogin服务器。</p></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-23-21-38-23.png" width height="250"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3) 客户端的名字解析器将向该服务器的名字服务器重发上述A类型查询，这个查询通常是将期望递归标志设置为1。</span><br><span class="line"></span><br><span class="line">6) Rlogin服务器收到来自客户的连接请求后，调用它的名字解析器通过T C P连接请求中的I P地址获得客户主机名。这是一个P T R查询请求，由一个根名字服务器处理。这个根名字服务器可以不同于步骤1中客户使用的根名字服务器。</span><br></pre></td></tr></table></figure><h4 id="FQDN">12.5.1. FQDN</h4><blockquote><p>FQDN：(Fully Qualified Domain Name)全限定域名：同时带有主机名和域名的名称。（通过符号“.”）</p><p>例如：主机名是bigserver,域名是mycompany.com,那么FQDN就是bigserver.mycompany.com。</p><p>全限定域名可以从逻辑上准确地表示出主机在什么地方，也可以说全域名是主机名的一种完全表示形式</p></blockquote><h2 id="TCP：传输控制协议">13. TCP：传输控制协议</h2><blockquote><p>C P提供一种面向连接的、可靠的字节流服务</p><ul><li>在一个TCP连接中，仅有两方进行彼此通信。广播和多播不能用于T C P</li><li>应用数据被分割成T C P认为最适合发送的数据块。这和U D P完全不同，应用程序产生的数据报长度将保持不变</li><li>当T C P发出一个段后，它启动一个定时器，等待目的端确认收到这个报文段。如果不能及时收到一个确认，将重发这个报文段。</li><li>当T C P收到发自T C P连接另一端的数据，它将发送一个确认。这个确认不是立即发送，通常将推迟几分之一秒，</li><li>T C P将保持它首部和数据的检验和</li><li>既然T C P报文段作为I P数据报来传输，而I P数据报的到达可能会失序，因此T C P报文段的到达也可能会失序。如果必要，T C P将对收到的数据进行重新排序，将收到的数据以正确的顺序交给应用层。</li><li>既然I P数据报会发生重复，T C P的接收端必须丢弃重复的数据</li><li>T C P还能提供流量控制。T C P连接的每一方都有固定大小的缓冲空间。</li><li>T C P对字节流的内容不作任何解释。T C P不知道传输的数据字节流是二进制数据，还是A S C I I字符、E B C D I C字符或者其他类型数据<ul><li>这种对字节流的处理方式与U n i x操作系统对文件的处理方式很相似。U n i x的内核对一个应用读或写的内容不作任何解释，而是交给应用程序处理。<strong>对Unix的内核来说，它无法区分一个二进制文件与一个文本文件</strong></li></ul></li></ul></blockquote><h3 id="TCP的首部">13.1. TCP的首部</h3><img loading="lazy" src="/posts/2f4ac1e5/2020-08-23-21-49-12.png" width height="250"><blockquote><p>一个I P地址和一个端口号也称为一个<strong>插口</strong>（s o c k e t）。这个术语出现在最早的T C P规范（R F C 7 9 3）中。<strong>插口对（s o c k e tp a i r）(包含客户I P地址、客户端口号、服务器IP地址和服务器端口号的四元组)可唯一确定互联网络中每个T C P连接的双方</strong></p><p><strong>源端和目的端的端口号，这两个值加上I P首部中的源端IP地址和目的端IP地址唯一确定一个TCP连接</strong></p><hr><p>序号用来标识从TCP发端向TCP收端发送的数据字节流，它表示在这个报文段中的的第一个数据字节</p><hr><p>当建立一个新的连接时，SYN标志变1.</p><p>序号字段包含由这个主机选择的该连接的<strong>初始序号I S N（Initial Sequence Number）</strong>。该主机要发送数据的第一个字节序号为这个ISN加1，因为SYN标志消耗了一个序号</p><ul><li>I S N随时间而变化，因此每个连接都将具有不同的I S N</li></ul></blockquote><ul><li><p>URG</p><ul><li>紧急指针（u rgent pointer）有效</li></ul></li><li><p>ACK</p><ul><li>确认序号有效。</li></ul></li><li><p>PSH</p><ul><li>接收方应该尽快将这个报文段交给应用层。</li></ul></li><li><p>RST</p><ul><li>重建连接。</li></ul></li><li><p>SYN</p><ul><li>同步序号用来发起一个连接。</li></ul></li><li><p>FIN</p><ul><li>发端完成发送任务</li></ul></li><li><p>窗口大小是一个16 bit字段，因而窗口大小最大为6 5 5 3 5字节。</p><ul><li>窗口刻度选项允许这个值按比例变化以提供更大的窗口</li></ul></li><li><p>最常见的可选字段是<strong>最长报文大小</strong>，又称为<strong>MSS</strong>(Maximum Segment Size)。每个连接方通常都在通信的第一个报文段（为建立连接而设置S Y N标志的那个段）中指明这个选项。它指明本端所能接收的最大长度的报文段</p></li></ul><h2 id="TCP连接的建立与终止">14. TCP连接的建立与终止</h2><img loading="lazy" src="/posts/2f4ac1e5/2020-08-24-16-18-05.png" width height="200"> <img loading="lazy" src="/posts/2f4ac1e5/2020-08-24-16-18-48.png" width height="100"><h3 id="三次握手（three-way-handshake）">14.1. 三次握手（three-way handshake）</h3><img loading="lazy" src="/posts/2f4ac1e5/2020-08-24-21-33-13.png" width height="350"><ul><li>发送第一个S Y N的一端将执行主动打开（active open）。接收这个S Y N并发回下一个S Y N的另一端执行被动打开（passive open）</li></ul><h4 id="半连接与全连接">14.1.1. 半连接与全连接</h4><p>当服务端调用listen函数监听端口的时候，内核会为每个监听的socket创建两个队列：</p><ul><li><p>半连接队列(syn queue)：客户端发送SYN包，服务端收到后回复SYN+ACK后，服务端进入SYN_RCVD状态，这个时候的socket会放到半连接队列。</p></li><li><p>全连接队列(accept queue)：当服务端收到客户端的ACK后，socket会从半连接队列移出到全连接队列。当调用accpet函数的时候，会从全连接队列的头部返回可用socket给用户进程。</p></li><li><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://juejin.im/post/6844904030565564430">TCP的全连接和半连接队列</a></p></li></ul><h3 id="连接终止协议-4次握手">14.2. 连接终止协议(4次握手)</h3><blockquote><p>既然一个T C P连接是<strong>全双工（即数据在两个方向上能同时传递）</strong>，因此每个方向必须单独地进行关闭</p></blockquote><ul><li>这原则就是当一方完成它的数据发送任务后就能发送一个F I N来终止这个方向连接。当一端收到一个F I N，它必须通知应用层另一端已经终止了那个方向的数据传送</li><li>收到一个F I N只意味着在这一方向上没有数据流动。<strong>一个T C P连接在收到一个F I N后仍能发送数据</strong>。而这对利用半关闭的应用来说是可能的，尽管在实际应用中只有很少的T C P应用程序这样做</li><li>首先进行关闭的一方（即发送第一个F I N）将执行<strong>主动关闭</strong>，而另一方（收到这个F I N）执行<strong>被动关闭</strong></li></ul><img loading="lazy" src="/posts/2f4ac1e5/2020-08-24-21-43-33.png" width height="250"><h3 id="连接建立的超时">14.3. 连接建立的超时</h3><img loading="lazy" src="/posts/2f4ac1e5/2020-08-24-21-52-56.png" width height="200"><h2 id="最大报文段长度">15. 最大报文段长度</h2><ul><li>一般说来，如果没有分段发生，M S S还是越大越好<ul><li>报文段越大允许每个报文段传送的数据就越多，相对I P和T C P首部有更高的网络利用率</li></ul></li><li>当T C P发送一个S Y N时，或者是因为一个本地应用进程想发起一个连接，或者是因为另一端的主机收到了一个连接请求，它能将M S S值设置为外出接口上的M T U长度减去固定的I P首部和TCP首部长度。<ul><li>对于一个以太网，M S S值可达1 4 6 0字节。</li><li>使用IEEE 802.3的封装，它的M S S可达1452字节</li></ul></li></ul><blockquote><p>如果目的I P地址为“非本地的( n o n l o c a l )”，M S S通常的默认值为5 3 6。而区分地址是本地还是非本地是简单的</p><ul><li>如果目的I P地址的网络号与子网号都和我们的相同，则是本地的；</li><li>如果目的IP地址的网络号与我们的完全不同，则是非本地的；</li><li>如果目的IP地址的网络号与我们的相同而子网号与我们的不同，则可能是本地的，也可能是非本地的</li></ul></blockquote><h3 id="TCP的半关闭">15.1. TCP的半关闭</h3><p>TCP提供了连接的一端在结束它的发送后还能接收来自另一端数据的能力。这就是所谓的半关闭。只有很少的应用程序使用它</p><img loading="lazy" src="/posts/2f4ac1e5/2020-08-25-09-00-22.png" width height="250"><h3 id="TCP的状态变迁图">15.2. TCP的状态变迁图</h3><img loading="lazy" src="/posts/2f4ac1e5/2020-08-25-09-03-39.png" width height="150"><p>T I M E _ WAIT状态也称为2 M S L等待状态。每个具体T C P实现必须选择一个<strong>报文段最大生存时间MSL（Maximum Segment Lifetime）</strong>。它是任何报文段被丢弃前在网络内的最长时间。我们知道这个时间是有限的，因为T C P报文段以I P数据报在网络内传输，而I P数据报则有限制其生存时间的T T L字段。</p><ul><li><p>这种2 M S L等待的另一个结果是这个T C P连接在2 M S L等待期间，定义这个连接的插口（客户的I P地址和端口号，服务器的I P地址和端口号）不能再被使用。这个连接只能在2 M S L结束后才能再被使用</p><ul><li>大多数T C P实现（如伯克利版）强加了更为严格的限制</li></ul></li><li><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.zhihu.com/question/22277356?from=profile_question_card">tcp的伯克利实现与当今的tcp实现差距有多大？ - 知乎</a></p></li></ul><h3 id="复位报文段">15.3. 复位报文段</h3><p>T C P首部中的R S T比特是用于“复位”的</p><ul><li>无论何时一个报文段发往<strong>基准的连接（referenced connection）</strong>出现错误，T C P都会发出一个复位报文段</li><li><strong>产生复位的一种常见情况是当连接请求到达时，目的端口没有进程正在听</strong></li></ul><img loading="lazy" src="/posts/2f4ac1e5/2020-08-25-09-16-37.png" width height="200"><ul><li>终止一个连接的正常方式是一方发送F I N。有时这也称为<strong>有序释放（orderly release）</strong>，因为在所有排队数据都已发送之后才发送F I N，正常情况下没有任何数据丢失。但也有可能发送一个复位报文段而不是F I N来<strong>中途</strong>释放一个连接。有时称这为<strong>异常释放（abortive release）</strong>。</li></ul><h3 id="同时打开">15.4. 同时打开</h3><p>两个应用程序同时彼此执行主动打开的情况是可能的，尽管发生的可能性极小</p><ul><li>例如，主机A中的一个应用程序使用本地端口7 7 7 7，并与主机B的端口8 8 8 8执行主动打开。主机B中的应用程序则使用本地端口8 8 8 8，并与主机A的端口7 7 7 7执行主动打开</li></ul><img loading="lazy" src="/posts/2f4ac1e5/2020-08-25-09-20-25.png" width height="200"><p>同时关闭</p><img loading="lazy" src="/posts/2f4ac1e5/2020-08-25-09-20-58.png" width height="200"><h3 id="TCP-选项">15.5. TCP 选项</h3><p>一部分</p><img loading="lazy" src="/posts/2f4ac1e5/2020-08-25-09-25-47.png" width height="200"><h3 id="TCP服务器端口号">15.6. TCP服务器端口号</h3><p>netstat</p><ul><li>a: 将显示网络中的所有主机端，而不仅仅是处于E S TA B L I S H E D的主机端</li><li>n: 将以点分十进制的形式显示I P地址，而不是通过D N S将地址转化为主机名，同时还要求显示端口号（例如为2 3）而不是服务名称（如Te l n e t）</li><li>f inet: 仅要求显示使用T C P或U D P的主机</li></ul><h2 id="TCP的交互数据流">16. TCP的交互数据流</h2><p>特点：发的多，内容小</p><p>在一个R l o g i n连接上客户一般每次发送一个字节到服务器，这就产生了一些4 1字节长的分组：2 0字节的I P首部、2 0字节的T C P首部和1个字节的数据。在局域网上，这些小分组（被称为微小分组（t i n y g r a m））通常不会引起麻烦，因为局域网一般不会出现拥塞。但在广域网上，这些小分组则会增加拥塞出现的可能。</p><ul><li>一种简单和好的方法就是采用RFC 896 [Nagle 1984]中所建议的Nagle算法<ul><li>该算法要求一个T C P连接上最多只能有一个未被确认的未完成的小分组，在该分组的确认到达之前不能发送其他的小分组</li><li>该算法的优越之处在于它是自适应的：确认到达得越快，数据也就发送得越快。而在希望减少微小分组数目的低速广域网上，则会发送更少的分组</li></ul></li></ul><img loading="lazy" src="/posts/2f4ac1e5/2020-08-25-10-43-52.png" width height="300"><h3 id="窗口大小通告">16.1. 窗口大小通告</h3><p>我们可以观察到s l i p通告窗口大小为4 0 9 6字节，而v a n g o g h通告其窗口大小为8 1 9 2个字节。上图中的大多数报文段都包含这两个值中的一个</p><blockquote><p>交互数据总是以小于最大报文段长度的分组发送。在R l o g i n中通常只有一个字节从客户发送到服务器。Te l n e t允许一次发送一行输入数据，但是目前大多数实现仍然发送一个字节。</p><p>对于这些小的报文段，接收方使用经受时延的确认方法来判断确认是否可被推迟发送，以便与回送数据一起发送。这样通常会减少报文段的数目，尤其是对于需要回显用户输入字符的R l o g i n会话</p></blockquote><h2 id="TCP的成块数据流">17. TCP的成块数据流</h2><p>停止等待协议: 数据发送方在发送下一个数据块之前需要等待接收对已发送数据的确认</p><h3 id="快的发送方和慢的接收方">17.1. 快的发送方和慢的接收方</h3><blockquote><p>发送方发送4个<strong>背靠背（b a c k - t o - b a c k）</strong>的数据报文段去填充接收方的窗口，然后停下来等待一个A C K。接收方发送A C K（报文段8），但通告其窗口大小为0，这说明接收方已收到所有数据，但这些数据都在接收方的T C P缓冲区，因为应用程序还没有机会读取这些数据。另一个A C K（称为窗口更新）在17.4 ms后发送，表明接收方现在可以接收另外的4 0 9 6个字节的数据。虽然这看起来像一个A C K，但由于它并不确认任何新数据，只是用来增加窗口的右边沿，因此被称为<strong>窗口更新</strong></p></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-25-10-54-08.png" width height="200"><h3 id="滑动窗口">17.2. 滑动窗口</h3><blockquote><p>（发送方）将字节从1至11进行标号</p><p>接收方通告的窗口称为提出的窗口（o ff e r e dw i n d o w），它覆盖了从第4字节到第9字节的区域</p><p><strong>发送方计算它的可用窗口，该窗口表明多少数据可以立即被发送</strong></p><hr><p>由于是全双工协议，因此A和B应该分别维护着一个独立的发送缓冲区和接收缓冲区</p></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-25-10-56-17.png" width height="150"><ul><li>称窗口左边沿向右边沿靠近为<strong>窗口合拢</strong>。这种现象发生在<strong>数据被发送和确认</strong>时</li><li>当窗口右边沿向右移动时将允许发送更多的数据，我们称之为<strong>窗口张开</strong>。这种现象发生在<strong>另一端的接收进程读取已经确认的数据并释放了TCP的接收缓存时</strong></li><li>当右边沿向左移动时，我们称之为<strong>窗口收缩</strong>。Host Requirements RFC强烈建议不要使用这种方式。但TCP必须能够在某一端产生这种情况时进行处理。</li></ul><img loading="lazy" src="/posts/2f4ac1e5/2020-08-25-11-00-28.png" width height="150"><ul><li>发送方不必发送一个全窗口大小的数据</li></ul><h3 id="成块数据的吞吐量">17.3. 成块数据的吞吐量</h3><img loading="lazy" src="/posts/2f4ac1e5/2020-08-25-16-26-25.png" width height="300"><ul><li>在时间0，由于发送方处于慢启动中（其拥塞窗口为1个报文段），因此在继续发送以前它必须等待该数据段的确认</li><li>8个时间单元的<strong>往返时间RT T（R o u n d - Trip Ti m e）</strong></li><li>我们有意把A C K报文段画得比数据报文段小，这是因为它通常只有一个IP首部和一个TCP首部</li></ul><img loading="lazy" src="/posts/2f4ac1e5/2020-08-25-16-30-57.png" width height="200"><ul><li>在时间3 1及其后续时间，发送方和接收方之间的管道( p i p e )被填满。此时不论拥塞窗口和通告窗口是多少，它都不能再容纳更多的数据。每当接收方在某一个时间单位从网络上移去一个报文段，发送方就再发送一个报文段到网络上。但是不管有多少报文段填充了这个管道，返回路径上总是具有相同数目的A C K。这就是连接的理想稳定状态</li></ul><h4 id="带宽时延乘积">17.3.1. 带宽时延乘积</h4><p>$c a p a c i t y(bit) &#x3D; b a n d w i d t h(b&#x2F;s) ×ro u n d-trip time( s )$</p><ul><li>增加了一倍的RTT会使通路容量也增加一倍(时延)</li><li>增加一倍的带宽也可使该管道的容量增加一倍</li></ul><img loading="lazy" src="/posts/2f4ac1e5/2020-08-25-16-34-09.png" width height="200"><h4 id="拥塞">17.3.2. 拥塞</h4><blockquote><p>当数据到达一个大的管道（如一个快速局域网）并向一个较小的管道（如一个较慢的广域网）发送时便会发生拥塞</p><ul><li>会引起路由器丢弃分组</li></ul></blockquote><h3 id="PUSH标志">17.4. PUSH标志</h3><p>发送方使用该标志通知接收方将所收到的数据全部提交给接收进程</p><ul><li>许多实现程序认为P U S H标志已经过时，一个好的T C P实现能够自行决定何时设置这个标志</li></ul><h3 id="慢启动">17.5. 慢启动</h3><blockquote><p><strong>发送方一开始便向网络发送多个报文段，直至达到接收方通告的窗口大小为止</strong>。当发送方和接收方处于同一个局域网时，这种方式是可以的。但是如果在发送方和接收方之间存在多个路由器和速率较慢的链路时，就有可能出现一些问题。<strong>一些中间路由器必须缓存分组，并有可能耗尽存储器的空间</strong></p><p>现在，T C P需要支持一种被称为“慢**启动(slow start)**”的算法。该算法通过观察到新分组进入网络的速率应该与另一端返回确认的速率相同而进行工作</p><hr><p>慢启动为<strong>发送方的TCP</strong>增加了另一个窗口：拥塞窗口(congestion window)，记为cwnd</p><p>拥塞窗口被初始化为1个报文段（即另一端通告的报文段大小）。每收到一个A C K，拥塞窗口就增加一个报文段（c w n d以字节为单位，但是慢启动以报文段大小为单位进行增加）</p><p><strong>发送方取拥塞窗口与通告窗口中的最小值作为发送上限</strong>。</p><ul><li><strong>拥塞窗口是发送方使用的流量控制，而通告窗口则是接收方使用的流量控制</strong></li></ul></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-25-12-52-53.png" width height="200"><h3 id="紧急方式">17.6. 紧急方式</h3><p>T C P提供了“紧急方式( u rgent mode)”，它使一端可以告诉另一端有些具有某种方式的“紧急数据”已经放置在普通的数据流中。</p><ul><li>紧急方式有什么作用呢？两个最常见的例子是Te l n e t和R l o g i n。当交互用户键入中断键时，</li><li>另一个例子是F T P，当交互用户放弃一个文件的传输时</li></ul><h2 id="TCP的超时与重传">18. TCP的超时与重传</h2><blockquote><p>数据和确认都有可能会丢失。T C P通过在发送时设置一个定时器来解决这种问题。如果当定时器溢出时还没有收到确认，它就重传该数据</p><p>关键之处就在于超时和重传的策略，即怎样决定<strong>超时间隔</strong>和如何确定<strong>重传的频率</strong></p></blockquote><p>TCP管理4个不同的定时器</p><ul><li>重传定时器使用于当希望收到另一端的确认</li><li>坚持( p e r s i s t )定时器使窗口大小信息保持不断流动，即使另一端关闭了其接收窗口</li><li>**保活( k e e p a l i v e )**定时器可检测到一个空闲连接的另一端何时崩溃或重启</li><li><strong>2MSL定时器</strong>测量一个连接处于T I M E _ WA I T状态的时间</li></ul><p>指数退避(exponential backoff)</p><ul><li>当第一次发送后所设置的超时时间实际上为1.5秒，此后该时间在每次重传时增加1倍并直至64秒</li></ul><h3 id="RTT估计器的计算">18.1. RTT估计器的计算</h3><p>RTO（Retransmission TimeOut）即重传超时时间</p><blockquote><p>TCP超时与重传中一个很最重要的部分是对一个给定连接的往返时间（RTT）的测量。由于网络流量的变化，这个时间会相应地发生改变，TCP需要跟踪这些变化并动态调整超时时间RTO。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">变量A和D分别被初始化为0和3秒。初始的重传超时使用下面的公式进行计算</span><br><span class="line"></span><br><span class="line">RTO= A+ 2D= 0 + 2×3 = 6 s</span><br><span class="line"></span><br><span class="line">（因子2D只在这个初始化计算中使用。正如前面提到的，以后使用4D和A相加来计算RTO）</span><br><span class="line"></span><br><span class="line">当超时在5 . 8 0 2秒（6s）后发生时，计算当前的RTO值为</span><br><span class="line"></span><br><span class="line">RTO= A+ 4D= 0 + 4×3 = 12 </span><br><span class="line"></span><br><span class="line">因此，应用于RTO的指数退避取为12。由于这是第1次超时，我们使用倍数2，因此下一个超时时间取值为24秒</span><br></pre></td></tr></table></figure><h3 id="拥塞避免算法">18.2. 拥塞避免算法</h3><blockquote><p>慢启动算法是在一个连接上发起数据流的方法，但有时我们会达到中间路由器的极限，此时分组将被丢弃。拥塞避免算法是一种处理丢失分组的方法</p><p>该算法假定由于分组受到损坏引起的丢失是非常少的（远小于1 %），因此<strong>分组丢失就意味着在源主机和目的主机之间的某处网络上发生了拥塞</strong>。</p><ul><li>有两种分组丢失的指示：<strong>发生超时</strong>和<strong>接收到重复的确认</strong></li></ul><hr><p>拥塞避免算法和慢启动算法是两个目的不同、独立的算法。<strong>但是当拥塞发生时，我们希望降低分组进入网络的传输速率，于是可以调用慢启动来作到这一点</strong>。在实际中这两个算法通常在一起实现。</p><ul><li>拥塞避免算法和慢启动算法需要对每个连接维持两个变量：一个拥塞窗口c w n d和一个慢启动门限s s t h re s h</li><li>对一个给定的连接，初始化c w n d为1个报文段，s s t h re s h为6 5 5 3 5个字节</li><li>当拥塞发生时（超时或收到重复确认），<strong>ssthresh</strong>被设置为当前窗口大小的一半（c w n d和接收方通告窗口大小的最小值，但最少为2个报文段）<ul><li>如果是<strong>超时</strong>引起了拥塞，则<strong>cwnd</strong>被设置为1个报文段（这就是慢启动）</li></ul></li><li>当新的数据被对方确认时，就增加c w n d。<strong>如果c w n d小于或等于s s t h re s h，则正在进行慢启动，否则正在进行拥塞避免</strong>。慢启动一直持续到我们回到当拥塞发生时所处位置的半时候才停止，然后转为执行拥塞避免</li></ul></blockquote><ul><li>慢启动算法初始设置c w n d为1个报文段，此后每收到一个确认就加1，窗口按指数方式增长：发送1个报文段，然后是2个，接着是4个</li><li>拥塞避免算法要求每次收到一个确认时将c w n d增加1 &#x2F;c w n d。与慢启动的指数增加比起来，这是一种加性增长(additive increase)。我们希望在一个往返时间内最多为c w n d增加1个报文段（不管在这个RT T中收到了多少个A C K），然而慢启动将根据这个往返时间中所收到的确认的个数增加c w n d</li></ul><h3 id="快速重传与快速恢复算法">18.3. 快速重传与快速恢复算法</h3><ul><li>如果发送方设置的超时计时器时限已到但还没有收到确认，那么很可能是网络出现了拥塞，致使报文段在网络中的某处被丢弃。这时，TCP马上把拥塞窗口 cwnd 减小到1，并执行慢开始算法，同时把慢开始门限值ssthresh减半。这是不使用快重传的情况。<ul><li>快重传算法首先要求接收方每收到一个失序的报文段后就立即发出重复确认（为的是使发送方及早知道有报文段没有到达对方）而不要等到自己发送数据时才进行捎带确认</li></ul></li></ul><blockquote><p>接收方收到了M1和M2后都分别发出了确认。现在假定接收方没有收到M3但接着收到了M4。显然，接收方不能确认M4，因为M4是收到的失序报文段。根据可靠传输原理，接收方可以什么都不做，也可以在适当时机发送一次对M2的确认。但按照快重传算法的规定，接收方应及时发送对M2的重复确认，这样做可以让发送方及早知道报文段M3没有到达接收方。发送方接着发送了M5和M6。接收方收到这两个报文后，也还要再次发出对M2的重复确认。这样，发送方共收到了接收方的四个对M2的确认，其中后三个都是重复确认。快重传算法还规定，发送方只要一连收到三个重复确认就应当立即重传对方尚未收到的报文段M3，而不必继续等待M3设置的重传计时器到期。</p><p>由于发送方尽早重传未被确认的报文段，因此采用快重传后可以使整个网络吞吐量提高约20%</p></blockquote><h3 id="ICMP的差错">18.4. ICMP的差错</h3><p>T C P能够遇到的最常见的I C M P差错就是<strong>源站抑制、主机不可达和网络不可达</strong></p><ul><li>ICMP源站抑制差错:<ul><li>当一个系统(路由器或主机)接收数据报的速度比其处理速度快时,可能产生这个差错</li></ul></li><li>一个接收到的主机不可达或网络不可达实际上都被忽略，因为这两个差错都被认为是短暂现象</li></ul><h3 id="重新分组">18.5. 重新分组</h3><p>当T C P超时并重传时，它不一定要重传同样的报文段。相反，T C P允许进行重新分组而发送一个较大的报文段，这将有助于提高性能</p><ul><li><strong>因为TCP是使用字节序号而不是报文段序号来进行识别它所要发送的数据和进行确认</strong></li><li>TCP会话的每一端都包含一个32位（bit）的序列号，该序列号被用来跟踪该端发送的数据量。每一个包中都包含序列号，在接收端则通过确认号用来通知发送端数据成功接收<ul><li><strong>序列号为当前端成功发送的数据位数，确认号为当前端成功接收的数据位数</strong></li></ul></li></ul><blockquote><p>TCP 协议中的序号，指的是<strong>报文段序号</strong></p><p>如果一个 TCP 报文段的序号为 301，它携带了 100 字节的数据，就表示这 100 个字节的数据的字节序号范围是 [301, 400]，该报文段携带的第一个字节序号是 301，最后一个字节序号是400</p><ul><li><strong>也就是首字节序号？</strong></li></ul><hr><p>TCP 连接中，为传送的字节流（数据）中的每一个字节按顺序编号。也就是说，在一次 TCP连接建立的开始，到 TCP 连接的断开，你要传输的所有数据的每一个字节都要编号。这个序号称为<strong>字节序号</strong>。</p></blockquote><h2 id="TCP的坚持定时器">19. TCP的坚持定时器</h2><blockquote><p>如果一个确认丢失了，则双方就有可能因为等待对方而使连接终止：<strong>接收方等待接收数据（因为它已经向发送方通告了一个非0的窗口），而发送方在等待允许它继续发送数据的窗口更新</strong>。为防止这种死锁情况的发生，发送方使用一个坚持定时器(persist timer)来周期性地向接收方查询，以便发现窗口是否已增大。这些从发送方发出的报文段称为窗口探查( w i n d o w probe)。</p><ul><li>T C P不对A C K报文段进行确认，T C P只确认那些包含有数据的A C K报文段</li><li>这些探查被T C P的500 ms定时器超时例程所触发。当定时器时间到时，就发送窗口探查</li><li>计算坚持定时器时使用了普通的T C P指数退避。对一个典型的局域网连接，首次超时时间算出来是1 . 5秒，第2次的超时值增加一倍，为3秒计算坚持定时器时使用了普通的T C P指数退避。对一个典型的局域网连接，首次超时时间算出来是1 . 5秒，第2次的超时值增加一倍，为3秒，再下次乘以4为6秒，之后再乘以8为1 2秒等</li></ul></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-26-13-36-16.png" width height="120"><blockquote><p>在报文段13中，服务器确认了前面4个数据报文段，然后通告窗口为0，从而使客户停止发送任何其他的数据。这就引起客户设置其坚持定时器。如果在该定时器时间到时客户还没有接收到一个窗口更新，它就探查这个空的窗口以决定窗口更新是否丢失</p></blockquote><h3 id="糊涂窗口综合症">19.1. 糊涂窗口综合症</h3><p>糊涂窗口综合症(Silly Window Syndrome）</p><blockquote><p>糊涂窗口综合症是指当发送端应用进程产生数据很慢、或接收端应用进程处理接收缓冲区数据很慢，或二者兼而有之；就会使应用进程间传送的报文段很小，特别是有效载荷很小； 极端情况下，有效载荷可能只有1个字节；传输开销有40字节(20字节的IP头+20字节的TCP头) 这种现象</p><p>解决的方法是防止发送端的TCP逐个字节地发送数据。必须强迫发送端的TCP收集数据，然后用一个更大的数据块来发送</p><ul><li>Nagle算法</li></ul></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-26-13-45-53.png" width height="200"><blockquote><p>前4个数据报文段及其A C K（报文段1 ~ 5）表示发送方正在填充接收方的缓存。在那个时刻发送方停止了发送，但仍然有更多的数据需要发送。它将自己的坚持定时器置为最小值5分钟。</p><p>当坚持定时器时间到时，就发送出1个字节的数据（报文段6）。接收的应用进程已经从接收缓存中读取了2 5 6字节的数据（在时刻3 . 9 9），因此这个字节被接受并被确认（报文段7段）。但是通告窗口仍为0，由于接收方仍然没有足够的空间来接收一个满长度的报文，或者不能腾出缓存空间的一半。这就是接收方的糊涂窗口避免措施</p></blockquote><h2 id="TCP的保活定时器">20. TCP的保活定时器</h2><blockquote><p>如果T C P连接的双方都没有向对方发送数据，则在两个T C P模块之间不交换任何信息。例如，没有可以在其他网络协议中发现的轮询。这意味着我们可以启动一个客户与服务器建立一个连接，然后离去数小时、数天、数个星期或者数月，而连接依然保持</p><p>保活并不是T C P规范中的一部分</p></blockquote><img loading="lazy" src="/posts/2f4ac1e5/2020-08-26-13-53-44.png" width height="120"><blockquote><p>第4行是第一个<strong>保活探查</strong>，发生在两个小时以后（7 2 0 0秒）。在第6行的TCP报文段能够发送之前，首先观察到的是一个A R P请求和一个A R P应答。第6行的保活探查引出来自另一端的响应（第7行）。</p></blockquote><p>另一端崩溃并重新启动</p><img loading="lazy" src="/posts/2f4ac1e5/2020-08-26-13-56-06.png" width height="100"><h2 id="TCP的未来和性能">21. TCP的未来和性能</h2><h3 id="路径MTU发现">21.1. 路径MTU发现</h3><blockquote><p>为了找到路径MTU，主机首先发送整个数据包，并将IP首部的禁止分片标志设为1.这样路由器在遇到需要分片才能处理的包时不会分片，而是直接丢弃数据并通过ICMP协议将整个不可达的消息发回给主机。</p><p>主机将ICMP通知中的MTU设置为当前MTU，根据整个MTU对数据进行分片处理。如此反复下去，直到不再收到ICMP通知，此时的MTU就是路径MTU</p></blockquote><h3 id="长肥管道">21.2. 长肥管道</h3><p>具有大的带宽时延乘积（bandwith x rrt）的网络被称为长肥网络（Long Fat Network）</p><ul><li>(管道可以被水平拉长（一个长的RTT），或被垂直拉高（较高的带宽），或向两个方向拉伸)</li><li>TCP首部中窗口大小为16bit，因此窗口大小最大为65535字节，这就将发送方发送但未被确认的数据的总长度限制到了65536字节。对于LFN管道，这可能会出现所有的数据都还未到达接收方，但是发送方已受限于窗口大小而不能继续发送的情形，这就极大的降低了网络的吞吐量<ul><li>窗口扩大选项可以解决这个问题</li></ul></li><li>由于长肥管的延时较高, 出现丢包的情况会使得管道枯竭(即网络通信速度急剧下降),<ul><li>快重传快恢复算法就是用以削弱这一问题的影响.</li></ul></li></ul><blockquote><p>　　作为传输控制协议，在实验室低速网络环境下诞生的TCP&#x2F;IP协议，在设计初期只是为了保证数据在链路上的可靠传输，其余的问题基本都没有考虑。如今长肥网络广泛存在于实际环境中，TCP协议的滑动窗口，重传和恢复等机制（在此不做详细探讨）使得广域网的传输效率急剧下降；而随着广域网的链路速率日益提高，原本TCP的窗口尺寸、慢启动等机制也无法充分利用网络带宽。“一些企业因为远程访问数据中心速度慢而扩容广域网带宽，但是TCP协议本身的限制，扩容后用户没有感受到与带宽提升相应的速度提高。”Blue Coat中国区产品市场经理申强表示。</p><ul><li>最简单得方法是，把大文件分块，然后起多条TCP传输，或者干脆使用UDP。</li></ul></blockquote><blockquote><p>高带宽时延乘积是设计如传输控制协议（TCP）的TCP调谐时的重要问题案例。<strong>因为只有发送方在被要求停止传输，并等待到接收方回传的确认数据成功接收的消息前发送足够多的数据，协议才能达到最佳吞吐量</strong>。如果与带宽时延乘积相比发送的数据量不足，那么链路并没有保持在繁忙状态，从而说明该协议是使链路运行在传输峰值以下</p></blockquote><h3 id="窗口扩大选项">21.3. 窗口扩大选项</h3><blockquote><p>窗口扩大选项使T C P的窗口定义从16 bit增加为32 bit。这并不是通过修改T C P首部来实现的，T C P首部仍然使用16 bit，而是通过定义一个选项实现对16 bit的扩大操作( s c a l i n go p e r a t i o n )来完成的。于是T C P在内部将实际的窗口大小维持为32 bit的值。</p></blockquote><h3 id="时间戳选项">21.4. 时间戳选项</h3><blockquote><p>间戳选项使发送方在每个报文段中放置一个时间戳值。接收方在确认中返回这个数值，从而允许发送方为每一个收到的A C K计算RTT</p><ul><li>较大的窗口大小需要进行更好的RT T计算</li></ul></blockquote><div class="declare" hidden="hidden"></div></div><div class="article-info article-info-index"><div class="article-tag tagcloud"><i class="icon-price-tags icon"></i><ul class="article-tag-list"><li class="article-tag-list-item"><a href="javascript:void(0)" class="js-tag article-tag-list-link color1">Notes</a></li></ul></div><div class="article-category tagcloud"><i class="icon-book icon"></i><ul class="article-tag-list"><li class="article-tag-list-item"><a href="/categories/Computer-Network//" class="article-tag-list-link color2">Computer Network</a></li><li class="article-tag-list-item"><a href="/categories/Computer-Network/Notes//" class="article-tag-list-link color1">Notes</a></li></ul></div><div class="clearfix"></div></div></div></article><nav id="article-nav"><a href="/posts/905f2d16/" id="article-nav-newer" class="article-nav-link-wrap"><i class="icon-circle-left"></i><div class="article-nav-title">[外设]Fokrere 64键盘组装记录</div></a><a href="/posts/961834f0/" id="article-nav-older" class="article-nav-link-wrap"><div class="article-nav-title">信安小知识-5</div><i class="icon-circle-right"></i></a></nav><aside class="wrap-side-operation"><div class="mod-side-operation"><div class="jump-container" id="js-jump-container" style="display: none"><a href="javascript:void(0)" class="mod-side-operation__jump-to-top"><i class="icon-font icon-back"></i></a><div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px"><i class="icon-font icon-plane jump-plane"></i></div></div><div class="toc-container tooltip-left"><i class="icon-font icon-category"></i><div class="tooltip tooltip-east"><span class="tooltip-item"></span> <span class="tooltip-content"><div class="toc-article"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">1. 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AB%AF%E7%B3%BB%E7%BB%9F%E5%92%8C%E4%B8%AD%E9%97%B4%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.1.</span> <span class="toc-text">1.1. 端系统和中间系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP-x2F-IP%E7%9A%84%E5%88%86%E5%B1%82"><span class="toc-number">1.2.</span> <span class="toc-text">1.2. TCP&#x2F;IP的分层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85"><span class="toc-number">1.3.</span> <span class="toc-text">1.3. 封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%94%A8%EF%BC%88Demultiplexing%EF%BC%89"><span class="toc-number">1.4.</span> <span class="toc-text">1.4. 分用（Demultiplexing）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E5%8F%B7"><span class="toc-number">1.5.</span> <span class="toc-text">1.5. 端口号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E7%BC%96%E7%A8%8B%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.6.</span> <span class="toc-text">1.6. 应用编程接口</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">2.</span> <span class="toc-text">2. 链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8"><span class="toc-number">2.1.</span> <span class="toc-text">2.1. 作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85-1"><span class="toc-number">2.2.</span> <span class="toc-text">2.2. 封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9E%E7%8E%AF%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.3.</span> <span class="toc-text">2.3. 回环接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E5%A4%A7%E4%BC%A0%E8%BE%93%E5%8D%95%E5%85%83MTU"><span class="toc-number">2.4.</span> <span class="toc-text">2.4. 最大传输单元MTU</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IP-%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.</span> <span class="toc-text">3. IP:网际协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E6%80%A7"><span class="toc-number">3.1.</span> <span class="toc-text">3.1. 特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IP%E9%A6%96%E9%83%A8"><span class="toc-number">3.2.</span> <span class="toc-text">3.2. IP首部</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%A1%E9%AA%8C%E5%92%8C"><span class="toc-number">3.2.1.</span> <span class="toc-text">3.2.1. 校验和</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IP%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="toc-number">3.3.</span> <span class="toc-text">3.3. IP路由器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E8%A1%A8"><span class="toc-number">3.3.1.</span> <span class="toc-text">3.3.1. 路由表</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E7%BD%91%E5%AF%BB%E5%9D%80"><span class="toc-number">3.4.</span> <span class="toc-text">3.4. 子网寻址</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#x%E7%B1%BB%E5%9C%B0%E5%9D%80"><span class="toc-number">3.4.1.</span> <span class="toc-text">3.4.1. x类地址</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81"><span class="toc-number">3.5.</span> <span class="toc-text">3.5. 子网掩码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5%E7%9A%84IP%E5%9C%B0%E5%9D%80"><span class="toc-number">3.6.</span> <span class="toc-text">3.6. 特殊情况的IP地址</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ARP%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.</span> <span class="toc-text">4. ARP地址解析协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ARP%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98"><span class="toc-number">4.1.</span> <span class="toc-text">4.1. ARP高速缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ARP%E7%9A%84%E5%88%86%E7%BB%84%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.2.</span> <span class="toc-text">4.2. ARP的分组格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ARP%E4%BB%A3%E7%90%86"><span class="toc-number">4.3.</span> <span class="toc-text">4.3. ARP代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%8D%E8%B4%B9ARP"><span class="toc-number">4.4.</span> <span class="toc-text">4.4. 免费ARP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ICMP%EF%BC%9AInternet%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.</span> <span class="toc-text">5. ICMP：Internet控制报文协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.1.</span> <span class="toc-text">5.1. 类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ICMP%E6%97%B6%E9%97%B4%E6%88%B3%E8%AF%B7%E6%B1%82"><span class="toc-number">5.2.</span> <span class="toc-text">5.2. ICMP时间戳请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ICMP%E7%AB%AF%E5%8F%A3%E4%B8%8D%E5%8F%AF%E8%BE%BE%E5%B7%AE%E9%94%99"><span class="toc-number">5.3.</span> <span class="toc-text">5.3. ICMP端口不可达差错</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ICMP%E4%B8%8D%E5%8F%AF%E8%BE%BE%E5%B7%AE%E9%94%99%EF%BC%88%E9%9C%80%E8%A6%81%E5%88%86%E7%89%87%EF%BC%89"><span class="toc-number">5.4.</span> <span class="toc-text">5.4. ICMP不可达差错（需要分片）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ping%E7%A8%8B%E5%BA%8F"><span class="toc-number">6.</span> <span class="toc-text">6. Ping程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IP%E8%AE%B0%E5%BD%95%E8%B7%AF%E7%94%B1%E9%80%89%E9%A1%B9"><span class="toc-number">6.1.</span> <span class="toc-text">6.1. IP记录路由选项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IP%E9%80%89%E8%B7%AF"><span class="toc-number">7.</span> <span class="toc-text">7. IP选路</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%AE%88%E6%8A%A4%E7%A8%8B%E5%BA%8F"><span class="toc-number">7.1.</span> <span class="toc-text">7.1. 路由守护程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%89%E8%B7%AF%E5%8E%9F%E7%90%86"><span class="toc-number">7.2.</span> <span class="toc-text">7.2. 选路原理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UDP%EF%BC%9A%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AE"><span class="toc-number">8.</span> <span class="toc-text">8. UDP：用户数据报协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#UDP%E6%A3%80%E9%AA%8C%E5%92%8C"><span class="toc-number">8.1.</span> <span class="toc-text">8.1. UDP检验和</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%AA%E9%A6%96%E9%83%A8"><span class="toc-number">8.1.1.</span> <span class="toc-text">8.1.1. 伪首部</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IP%E5%88%86%E7%89%87"><span class="toc-number">8.2.</span> <span class="toc-text">8.2. IP分片</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UDP%E5%92%8CARP%E4%B9%8B%E9%97%B4%E7%9A%84%E4%BA%A4%E4%BA%92%E4%BD%9C%E7%94%A8"><span class="toc-number">9.</span> <span class="toc-text">9. UDP和ARP之间的交互作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E5%A4%A7UDP%E6%95%B0%E6%8D%AE%E6%8A%A5%E9%95%BF"><span class="toc-number">10.</span> <span class="toc-text">10. 最大UDP数据报长</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%BF%E6%92%AD%E5%92%8C%E5%A4%9A%E6%92%AD"><span class="toc-number">11.</span> <span class="toc-text">11. 广播和多播</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%90%91%E7%BD%91%E7%BB%9C%E7%9A%84%E5%B9%BF%E6%92%AD"><span class="toc-number">11.1.</span> <span class="toc-text">11.1. 指向网络的广播</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%90%91%E5%AD%90%E7%BD%91%E7%9A%84%E5%B9%BF%E6%92%AD"><span class="toc-number">11.2.</span> <span class="toc-text">11.2. 指向子网的广播</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DNS%EF%BC%9A%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F"><span class="toc-number">12.</span> <span class="toc-text">12. DNS：域名系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#DNS%E7%9A%84%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F"><span class="toc-number">12.1.</span> <span class="toc-text">12.1. DNS的报文格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DNS%E6%9F%A5%E8%AF%A2%E6%8A%A5%E6%96%87%E4%B8%AD%E7%9A%84%E9%97%AE%E9%A2%98%E9%83%A8%E5%88%86"><span class="toc-number">12.1.1.</span> <span class="toc-text">12.1.1. DNS查询报文中的问题部分</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DNS%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87%E4%B8%AD%E7%9A%84%E8%B5%84%E6%BA%90%E8%AE%B0%E5%BD%95%E9%83%A8%E5%88%86"><span class="toc-number">12.1.2.</span> <span class="toc-text">12.1.2. DNS响应报文中的资源记录部分</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E9%92%88%E6%9F%A5%E8%AF%A2"><span class="toc-number">12.2.</span> <span class="toc-text">12.2. 指针查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E8%AE%B0%E5%BD%95"><span class="toc-number">12.3.</span> <span class="toc-text">12.3. 资源记录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP-vs-UDP"><span class="toc-number">12.4.</span> <span class="toc-text">12.4. TCP vs UDP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E4%BE%8B%E5%AD%90"><span class="toc-number">12.5.</span> <span class="toc-text">12.5. 一个例子</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#FQDN"><span class="toc-number">12.5.1.</span> <span class="toc-text">12.5.1. FQDN</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TCP%EF%BC%9A%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE"><span class="toc-number">13.</span> <span class="toc-text">13. TCP：传输控制协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP%E7%9A%84%E9%A6%96%E9%83%A8"><span class="toc-number">13.1.</span> <span class="toc-text">13.1. TCP的首部</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TCP%E8%BF%9E%E6%8E%A5%E7%9A%84%E5%BB%BA%E7%AB%8B%E4%B8%8E%E7%BB%88%E6%AD%A2"><span class="toc-number">14.</span> <span class="toc-text">14. TCP连接的建立与终止</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%EF%BC%88three-way-handshake%EF%BC%89"><span class="toc-number">14.1.</span> <span class="toc-text">14.1. 三次握手（three-way handshake）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8A%E8%BF%9E%E6%8E%A5%E4%B8%8E%E5%85%A8%E8%BF%9E%E6%8E%A5"><span class="toc-number">14.1.1.</span> <span class="toc-text">14.1.1. 半连接与全连接</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E7%BB%88%E6%AD%A2%E5%8D%8F%E8%AE%AE-4%E6%AC%A1%E6%8F%A1%E6%89%8B"><span class="toc-number">14.2.</span> <span class="toc-text">14.2. 连接终止协议(4次握手)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B%E7%9A%84%E8%B6%85%E6%97%B6"><span class="toc-number">14.3.</span> <span class="toc-text">14.3. 连接建立的超时</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E5%A4%A7%E6%8A%A5%E6%96%87%E6%AE%B5%E9%95%BF%E5%BA%A6"><span class="toc-number">15.</span> <span class="toc-text">15. 最大报文段长度</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP%E7%9A%84%E5%8D%8A%E5%85%B3%E9%97%AD"><span class="toc-number">15.1.</span> <span class="toc-text">15.1. TCP的半关闭</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP%E7%9A%84%E7%8A%B6%E6%80%81%E5%8F%98%E8%BF%81%E5%9B%BE"><span class="toc-number">15.2.</span> <span class="toc-text">15.2. TCP的状态变迁图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E4%BD%8D%E6%8A%A5%E6%96%87%E6%AE%B5"><span class="toc-number">15.3.</span> <span class="toc-text">15.3. 复位报文段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E6%97%B6%E6%89%93%E5%BC%80"><span class="toc-number">15.4.</span> <span class="toc-text">15.4. 同时打开</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP-%E9%80%89%E9%A1%B9"><span class="toc-number">15.5.</span> <span class="toc-text">15.5. TCP 选项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%8F%A3%E5%8F%B7"><span class="toc-number">15.6.</span> <span class="toc-text">15.6. TCP服务器端口号</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TCP%E7%9A%84%E4%BA%A4%E4%BA%92%E6%95%B0%E6%8D%AE%E6%B5%81"><span class="toc-number">16.</span> <span class="toc-text">16. TCP的交互数据流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AA%97%E5%8F%A3%E5%A4%A7%E5%B0%8F%E9%80%9A%E5%91%8A"><span class="toc-number">16.1.</span> <span class="toc-text">16.1. 窗口大小通告</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TCP%E7%9A%84%E6%88%90%E5%9D%97%E6%95%B0%E6%8D%AE%E6%B5%81"><span class="toc-number">17.</span> <span class="toc-text">17. TCP的成块数据流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%AB%E7%9A%84%E5%8F%91%E9%80%81%E6%96%B9%E5%92%8C%E6%85%A2%E7%9A%84%E6%8E%A5%E6%94%B6%E6%96%B9"><span class="toc-number">17.1.</span> <span class="toc-text">17.1. 快的发送方和慢的接收方</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3"><span class="toc-number">17.2.</span> <span class="toc-text">17.2. 滑动窗口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%90%E5%9D%97%E6%95%B0%E6%8D%AE%E7%9A%84%E5%90%9E%E5%90%90%E9%87%8F"><span class="toc-number">17.3.</span> <span class="toc-text">17.3. 成块数据的吞吐量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%A6%E5%AE%BD%E6%97%B6%E5%BB%B6%E4%B9%98%E7%A7%AF"><span class="toc-number">17.3.1.</span> <span class="toc-text">17.3.1. 带宽时延乘积</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E"><span class="toc-number">17.3.2.</span> <span class="toc-text">17.3.2. 拥塞</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PUSH%E6%A0%87%E5%BF%97"><span class="toc-number">17.4.</span> <span class="toc-text">17.4. PUSH标志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%85%A2%E5%90%AF%E5%8A%A8"><span class="toc-number">17.5.</span> <span class="toc-text">17.5. 慢启动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A7%E6%80%A5%E6%96%B9%E5%BC%8F"><span class="toc-number">17.6.</span> <span class="toc-text">17.6. 紧急方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TCP%E7%9A%84%E8%B6%85%E6%97%B6%E4%B8%8E%E9%87%8D%E4%BC%A0"><span class="toc-number">18.</span> <span class="toc-text">18. TCP的超时与重传</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#RTT%E4%BC%B0%E8%AE%A1%E5%99%A8%E7%9A%84%E8%AE%A1%E7%AE%97"><span class="toc-number">18.1.</span> <span class="toc-text">18.1. RTT估计器的计算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8D%E7%AE%97%E6%B3%95"><span class="toc-number">18.2.</span> <span class="toc-text">18.2. 拥塞避免算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E9%87%8D%E4%BC%A0%E4%B8%8E%E5%BF%AB%E9%80%9F%E6%81%A2%E5%A4%8D%E7%AE%97%E6%B3%95"><span class="toc-number">18.3.</span> <span class="toc-text">18.3. 快速重传与快速恢复算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ICMP%E7%9A%84%E5%B7%AE%E9%94%99"><span class="toc-number">18.4.</span> <span class="toc-text">18.4. ICMP的差错</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E6%96%B0%E5%88%86%E7%BB%84"><span class="toc-number">18.5.</span> <span class="toc-text">18.5. 重新分组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TCP%E7%9A%84%E5%9D%9A%E6%8C%81%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-number">19.</span> <span class="toc-text">19. TCP的坚持定时器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%8A%E6%B6%82%E7%AA%97%E5%8F%A3%E7%BB%BC%E5%90%88%E7%97%87"><span class="toc-number">19.1.</span> <span class="toc-text">19.1. 糊涂窗口综合症</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TCP%E7%9A%84%E4%BF%9D%E6%B4%BB%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-number">20.</span> <span class="toc-text">20. TCP的保活定时器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TCP%E7%9A%84%E6%9C%AA%E6%9D%A5%E5%92%8C%E6%80%A7%E8%83%BD"><span class="toc-number">21.</span> <span class="toc-text">21. TCP的未来和性能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84MTU%E5%8F%91%E7%8E%B0"><span class="toc-number">21.1.</span> <span class="toc-text">21.1. 路径MTU发现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%95%BF%E8%82%A5%E7%AE%A1%E9%81%93"><span class="toc-number">21.2.</span> <span class="toc-text">21.2. 长肥管道</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AA%97%E5%8F%A3%E6%89%A9%E5%A4%A7%E9%80%89%E9%A1%B9"><span class="toc-number">21.3.</span> <span class="toc-text">21.3. 窗口扩大选项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E6%88%B3%E9%80%89%E9%A1%B9"><span class="toc-number">21.4.</span> <span class="toc-text">21.4. 时间戳选项</span></a></li></ol></li></ol></div></span></div></div></div></aside><script>document.querySelectorAll(".toc-number").forEach(function (t) {
    t.style.display = "none";
  });</script></div></div></div><footer id="footer"><div class="outer"><div id="footer-info"><div class="footer-left">&copy; 2023 何决云 <span id="timeDate">载入天数...</span><script>var now = new Date();
				function createtime() {
					var grt= new Date("05/30/2019 12:00:00");//此处修改你的建站时间或者网站上线时间
					now.setTime(now.getTime()+250);
					days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
					hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
					if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
					mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
					seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
					snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
					document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天.   Live2d作者：木果啊木果";

				}
				setInterval("createtime()",250);</script></div><div class="footer-right"></div></div></div></footer></div><script>var yiliaConfig = {
		mathjax: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: true,
		toc_hide_index: true,
		root: "/",
		innerArchive: true,
		showTags: false
	}</script><script src="https://hejueyun.github.io/jquery.min.js"></script><script>!(function (t) {
    function n(e) {
      if (r[e]) return r[e].exports;
      var i = (r[e] = { exports: {}, id: e, loaded: !1 });
      return t[e].call(i.exports, i, i.exports, n), (i.loaded = !0), i.exports;
    }
    var r = {};
    (n.m = t), (n.c = r), (n.p = "./"), n(0);
  })([
    function (t, n, r) {
      r(195), (t.exports = r(191));
    },
    function (t, n, r) {
      var e = r(3),
        i = r(52),
        o = r(27),
        u = r(28),
        c = r(53),
        f = "prototype",
        a = function (t, n, r) {
          var s,
            l,
            h,
            v,
            p = t & a.F,
            d = t & a.G,
            y = t & a.S,
            g = t & a.P,
            b = t & a.B,
            m = d ? e : y ? e[n] || (e[n] = {}) : (e[n] || {})[f],
            x = d ? i : i[n] || (i[n] = {}),
            w = x[f] || (x[f] = {});
          d && (r = n);
          for (s in r)
            (l = !p && m && void 0 !== m[s]),
              (h = (l ? m : r)[s]),
              (v =
                b && l
                  ? c(h, e)
                  : g && "function" == typeof h
                  ? c(Function.call, h)
                  : h),
              m && u(m, s, h, t & a.U),
              x[s] != h && o(x, s, v),
              g && w[s] != h && (w[s] = h);
        };
      (e.core = i),
        (a.F = 1),
        (a.G = 2),
        (a.S = 4),
        (a.P = 8),
        (a.B = 16),
        (a.W = 32),
        (a.U = 64),
        (a.R = 128),
        (t.exports = a);
    },
    function (t, n, r) {
      var e = r(6);
      t.exports = function (t) {
        if (!e(t)) throw TypeError(t + " is not an object!");
        return t;
      };
    },
    function (t, n) {
      var r = (t.exports =
        "undefined" != typeof window && window.Math == Math
          ? window
          : "undefined" != typeof self && self.Math == Math
          ? self
          : Function("return this")());
      "number" == typeof __g && (__g = r);
    },
    function (t, n) {
      t.exports = function (t) {
        try {
          return !!t();
        } catch (t) {
          return !0;
        }
      };
    },
    function (t, n) {
      var r = (t.exports =
        "undefined" != typeof window && window.Math == Math
          ? window
          : "undefined" != typeof self && self.Math == Math
          ? self
          : Function("return this")());
      "number" == typeof __g && (__g = r);
    },
    function (t, n) {
      t.exports = function (t) {
        return "object" == typeof t ? null !== t : "function" == typeof t;
      };
    },
    function (t, n, r) {
      var e = r(126)("wks"),
        i = r(76),
        o = r(3).Symbol,
        u = "function" == typeof o;
      (t.exports = function (t) {
        return e[t] || (e[t] = (u && o[t]) || (u ? o : i)("Symbol." + t));
      }).store = e;
    },
    function (t, n) {
      var r = {}.hasOwnProperty;
      t.exports = function (t, n) {
        return r.call(t, n);
      };
    },
    function (t, n, r) {
      var e = r(94),
        i = r(33);
      t.exports = function (t) {
        return e(i(t));
      };
    },
    function (t, n, r) {
      t.exports = !r(4)(function () {
        return (
          7 !=
          Object.defineProperty({}, "a", {
            get: function () {
              return 7;
            },
          }).a
        );
      });
    },
    function (t, n, r) {
      var e = r(2),
        i = r(167),
        o = r(50),
        u = Object.defineProperty;
      n.f = r(10)
        ? Object.defineProperty
        : function (t, n, r) {
            if ((e(t), (n = o(n, !0)), e(r), i))
              try {
                return u(t, n, r);
              } catch (t) {}
            if ("get" in r || "set" in r)
              throw TypeError("Accessors not supported!");
            return "value" in r && (t[n] = r.value), t;
          };
    },
    function (t, n, r) {
      t.exports = !r(18)(function () {
        return (
          7 !=
          Object.defineProperty({}, "a", {
            get: function () {
              return 7;
            },
          }).a
        );
      });
    },
    function (t, n, r) {
      var e = r(14),
        i = r(22);
      t.exports = r(12)
        ? function (t, n, r) {
            return e.f(t, n, i(1, r));
          }
        : function (t, n, r) {
            return (t[n] = r), t;
          };
    },
    function (t, n, r) {
      var e = r(20),
        i = r(58),
        o = r(42),
        u = Object.defineProperty;
      n.f = r(12)
        ? Object.defineProperty
        : function (t, n, r) {
            if ((e(t), (n = o(n, !0)), e(r), i))
              try {
                return u(t, n, r);
              } catch (t) {}
            if ("get" in r || "set" in r)
              throw TypeError("Accessors not supported!");
            return "value" in r && (t[n] = r.value), t;
          };
    },
    function (t, n, r) {
      var e = r(40)("wks"),
        i = r(23),
        o = r(5).Symbol,
        u = "function" == typeof o;
      (t.exports = function (t) {
        return e[t] || (e[t] = (u && o[t]) || (u ? o : i)("Symbol." + t));
      }).store = e;
    },
    function (t, n, r) {
      var e = r(67),
        i = Math.min;
      t.exports = function (t) {
        return t > 0 ? i(e(t), 9007199254740991) : 0;
      };
    },
    function (t, n, r) {
      var e = r(46);
      t.exports = function (t) {
        return Object(e(t));
      };
    },
    function (t, n) {
      t.exports = function (t) {
        try {
          return !!t();
        } catch (t) {
          return !0;
        }
      };
    },
    function (t, n, r) {
      var e = r(63),
        i = r(34);
      t.exports =
        Object.keys ||
        function (t) {
          return e(t, i);
        };
    },
    function (t, n, r) {
      var e = r(21);
      t.exports = function (t) {
        if (!e(t)) throw TypeError(t + " is not an object!");
        return t;
      };
    },
    function (t, n) {
      t.exports = function (t) {
        return "object" == typeof t ? null !== t : "function" == typeof t;
      };
    },
    function (t, n) {
      t.exports = function (t, n) {
        return {
          enumerable: !(1 & t),
          configurable: !(2 & t),
          writable: !(4 & t),
          value: n,
        };
      };
    },
    function (t, n) {
      var r = 0,
        e = Math.random();
      t.exports = function (t) {
        return "Symbol(".concat(
          void 0 === t ? "" : t,
          ")_",
          (++r + e).toString(36)
        );
      };
    },
    function (t, n) {
      var r = {}.hasOwnProperty;
      t.exports = function (t, n) {
        return r.call(t, n);
      };
    },
    function (t, n) {
      var r = (t.exports = { version: "2.4.0" });
      "number" == typeof __e && (__e = r);
    },
    function (t, n) {
      t.exports = function (t) {
        if ("function" != typeof t) throw TypeError(t + " is not a function!");
        return t;
      };
    },
    function (t, n, r) {
      var e = r(11),
        i = r(66);
      t.exports = r(10)
        ? function (t, n, r) {
            return e.f(t, n, i(1, r));
          }
        : function (t, n, r) {
            return (t[n] = r), t;
          };
    },
    function (t, n, r) {
      var e = r(3),
        i = r(27),
        o = r(24),
        u = r(76)("src"),
        c = "toString",
        f = Function[c],
        a = ("" + f).split(c);
      (r(52).inspectSource = function (t) {
        return f.call(t);
      }),
        (t.exports = function (t, n, r, c) {
          var f = "function" == typeof r;
          f && (o(r, "name") || i(r, "name", n)),
            t[n] !== r &&
              (f && (o(r, u) || i(r, u, t[n] ? "" + t[n] : a.join(String(n)))),
              t === e
                ? (t[n] = r)
                : c
                ? t[n]
                  ? (t[n] = r)
                  : i(t, n, r)
                : (delete t[n], i(t, n, r)));
        })(Function.prototype, c, function () {
          return ("function" == typeof this && this[u]) || f.call(this);
        });
    },
    function (t, n, r) {
      var e = r(1),
        i = r(4),
        o = r(46),
        u = function (t, n, r, e) {
          var i = String(o(t)),
            u = "<" + n;
          return (
            "" !== r &&
              (u += " " + r + '="' + String(e).replace(/"/g, "&quot;") + '"'),
            u + ">" + i + "</" + n + ">"
          );
        };
      t.exports = function (t, n) {
        var r = {};
        (r[t] = n(u)),
          e(
            e.P +
              e.F *
                i(function () {
                  var n = ""[t]('"');
                  return n !== n.toLowerCase() || n.split('"').length > 3;
                }),
            "String",
            r
          );
      };
    },
    function (t, n, r) {
      var e = r(115),
        i = r(46);
      t.exports = function (t) {
        return e(i(t));
      };
    },
    function (t, n, r) {
      var e = r(116),
        i = r(66),
        o = r(30),
        u = r(50),
        c = r(24),
        f = r(167),
        a = Object.getOwnPropertyDescriptor;
      n.f = r(10)
        ? a
        : function (t, n) {
            if (((t = o(t)), (n = u(n, !0)), f))
              try {
                return a(t, n);
              } catch (t) {}
            if (c(t, n)) return i(!e.f.call(t, n), t[n]);
          };
    },
    function (t, n, r) {
      var e = r(24),
        i = r(17),
        o = r(145)("IE_PROTO"),
        u = Object.prototype;
      t.exports =
        Object.getPrototypeOf ||
        function (t) {
          return (
            (t = i(t)),
            e(t, o)
              ? t[o]
              : "function" == typeof t.constructor && t instanceof t.constructor
              ? t.constructor.prototype
              : t instanceof Object
              ? u
              : null
          );
        };
    },
    function (t, n) {
      t.exports = function (t) {
        if (void 0 == t) throw TypeError("Can't call method on  " + t);
        return t;
      };
    },
    function (t, n) {
      t.exports =
        "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(
          ","
        );
    },
    function (t, n) {
      t.exports = {};
    },
    function (t, n) {
      t.exports = !0;
    },
    function (t, n) {
      n.f = {}.propertyIsEnumerable;
    },
    function (t, n, r) {
      var e = r(14).f,
        i = r(8),
        o = r(15)("toStringTag");
      t.exports = function (t, n, r) {
        t &&
          !i((t = r ? t : t.prototype), o) &&
          e(t, o, { configurable: !0, value: n });
      };
    },
    function (t, n, r) {
      var e = r(40)("keys"),
        i = r(23);
      t.exports = function (t) {
        return e[t] || (e[t] = i(t));
      };
    },
    function (t, n, r) {
      var e = r(5),
        i = "__core-js_shared__",
        o = e[i] || (e[i] = {});
      t.exports = function (t) {
        return o[t] || (o[t] = {});
      };
    },
    function (t, n) {
      var r = Math.ceil,
        e = Math.floor;
      t.exports = function (t) {
        return isNaN((t = +t)) ? 0 : (t > 0 ? e : r)(t);
      };
    },
    function (t, n, r) {
      var e = r(21);
      t.exports = function (t, n) {
        if (!e(t)) return t;
        var r, i;
        if (n && "function" == typeof (r = t.toString) && !e((i = r.call(t))))
          return i;
        if ("function" == typeof (r = t.valueOf) && !e((i = r.call(t))))
          return i;
        if (!n && "function" == typeof (r = t.toString) && !e((i = r.call(t))))
          return i;
        throw TypeError("Can't convert object to primitive value");
      };
    },
    function (t, n, r) {
      var e = r(5),
        i = r(25),
        o = r(36),
        u = r(44),
        c = r(14).f;
      t.exports = function (t) {
        var n = i.Symbol || (i.Symbol = o ? {} : e.Symbol || {});
        "_" == t.charAt(0) || t in n || c(n, t, { value: u.f(t) });
      };
    },
    function (t, n, r) {
      n.f = r(15);
    },
    function (t, n) {
      var r = {}.toString;
      t.exports = function (t) {
        return r.call(t).slice(8, -1);
      };
    },
    function (t, n) {
      t.exports = function (t) {
        if (void 0 == t) throw TypeError("Can't call method on  " + t);
        return t;
      };
    },
    function (t, n, r) {
      var e = r(4);
      t.exports = function (t, n) {
        return (
          !!t &&
          e(function () {
            n ? t.call(null, function () {}, 1) : t.call(null);
          })
        );
      };
    },
    function (t, n, r) {
      var e = r(53),
        i = r(115),
        o = r(17),
        u = r(16),
        c = r(203);
      t.exports = function (t, n) {
        var r = 1 == t,
          f = 2 == t,
          a = 3 == t,
          s = 4 == t,
          l = 6 == t,
          h = 5 == t || l,
          v = n || c;
        return function (n, c, p) {
          for (
            var d,
              y,
              g = o(n),
              b = i(g),
              m = e(c, p, 3),
              x = u(b.length),
              w = 0,
              S = r ? v(n, x) : f ? v(n, 0) : void 0;
            x > w;
            w++
          )
            if ((h || w in b) && ((d = b[w]), (y = m(d, w, g)), t))
              if (r) S[w] = y;
              else if (y)
                switch (t) {
                  case 3:
                    return !0;
                  case 5:
                    return d;
                  case 6:
                    return w;
                  case 2:
                    S.push(d);
                }
              else if (s) return !1;
          return l ? -1 : a || s ? s : S;
        };
      };
    },
    function (t, n, r) {
      var e = r(1),
        i = r(52),
        o = r(4);
      t.exports = function (t, n) {
        var r = (i.Object || {})[t] || Object[t],
          u = {};
        (u[t] = n(r)),
          e(
            e.S +
              e.F *
                o(function () {
                  r(1);
                }),
            "Object",
            u
          );
      };
    },
    function (t, n, r) {
      var e = r(6);
      t.exports = function (t, n) {
        if (!e(t)) return t;
        var r, i;
        if (n && "function" == typeof (r = t.toString) && !e((i = r.call(t))))
          return i;
        if ("function" == typeof (r = t.valueOf) && !e((i = r.call(t))))
          return i;
        if (!n && "function" == typeof (r = t.toString) && !e((i = r.call(t))))
          return i;
        throw TypeError("Can't convert object to primitive value");
      };
    },
    function (t, n, r) {
      var e = r(5),
        i = r(25),
        o = r(91),
        u = r(13),
        c = "prototype",
        f = function (t, n, r) {
          var a,
            s,
            l,
            h = t & f.F,
            v = t & f.G,
            p = t & f.S,
            d = t & f.P,
            y = t & f.B,
            g = t & f.W,
            b = v ? i : i[n] || (i[n] = {}),
            m = b[c],
            x = v ? e : p ? e[n] : (e[n] || {})[c];
          v && (r = n);
          for (a in r)
            ((s = !h && x && void 0 !== x[a]) && a in b) ||
              ((l = s ? x[a] : r[a]),
              (b[a] =
                v && "function" != typeof x[a]
                  ? r[a]
                  : y && s
                  ? o(l, e)
                  : g && x[a] == l
                  ? (function (t) {
                      var n = function (n, r, e) {
                        if (this instanceof t) {
                          switch (arguments.length) {
                            case 0:
                              return new t();
                            case 1:
                              return new t(n);
                            case 2:
                              return new t(n, r);
                          }
                          return new t(n, r, e);
                        }
                        return t.apply(this, arguments);
                      };
                      return (n[c] = t[c]), n;
                    })(l)
                  : d && "function" == typeof l
                  ? o(Function.call, l)
                  : l),
              d &&
                (((b.virtual || (b.virtual = {}))[a] = l),
                t & f.R && m && !m[a] && u(m, a, l)));
        };
      (f.F = 1),
        (f.G = 2),
        (f.S = 4),
        (f.P = 8),
        (f.B = 16),
        (f.W = 32),
        (f.U = 64),
        (f.R = 128),
        (t.exports = f);
    },
    function (t, n) {
      var r = (t.exports = { version: "2.4.0" });
      "number" == typeof __e && (__e = r);
    },
    function (t, n, r) {
      var e = r(26);
      t.exports = function (t, n, r) {
        if ((e(t), void 0 === n)) return t;
        switch (r) {
          case 1:
            return function (r) {
              return t.call(n, r);
            };
          case 2:
            return function (r, e) {
              return t.call(n, r, e);
            };
          case 3:
            return function (r, e, i) {
              return t.call(n, r, e, i);
            };
        }
        return function () {
          return t.apply(n, arguments);
        };
      };
    },
    function (t, n, r) {
      var e = r(183),
        i = r(1),
        o = r(126)("metadata"),
        u = o.store || (o.store = new (r(186))()),
        c = function (t, n, r) {
          var i = u.get(t);
          if (!i) {
            if (!r) return;
            u.set(t, (i = new e()));
          }
          var o = i.get(n);
          if (!o) {
            if (!r) return;
            i.set(n, (o = new e()));
          }
          return o;
        },
        f = function (t, n, r) {
          var e = c(n, r, !1);
          return void 0 !== e && e.has(t);
        },
        a = function (t, n, r) {
          var e = c(n, r, !1);
          return void 0 === e ? void 0 : e.get(t);
        },
        s = function (t, n, r, e) {
          c(r, e, !0).set(t, n);
        },
        l = function (t, n) {
          var r = c(t, n, !1),
            e = [];
          return (
            r &&
              r.forEach(function (t, n) {
                e.push(n);
              }),
            e
          );
        },
        h = function (t) {
          return void 0 === t || "symbol" == typeof t ? t : String(t);
        },
        v = function (t) {
          i(i.S, "Reflect", t);
        };
      t.exports = {
        store: u,
        map: c,
        has: f,
        get: a,
        set: s,
        keys: l,
        key: h,
        exp: v,
      };
    },
    function (t, n, r) {
      "use strict";
      if (r(10)) {
        var e = r(69),
          i = r(3),
          o = r(4),
          u = r(1),
          c = r(127),
          f = r(152),
          a = r(53),
          s = r(68),
          l = r(66),
          h = r(27),
          v = r(73),
          p = r(67),
          d = r(16),
          y = r(75),
          g = r(50),
          b = r(24),
          m = r(180),
          x = r(114),
          w = r(6),
          S = r(17),
          _ = r(137),
          O = r(70),
          E = r(32),
          P = r(71).f,
          j = r(154),
          F = r(76),
          M = r(7),
          A = r(48),
          N = r(117),
          T = r(146),
          I = r(155),
          k = r(80),
          L = r(123),
          R = r(74),
          C = r(130),
          D = r(160),
          U = r(11),
          W = r(31),
          G = U.f,
          B = W.f,
          V = i.RangeError,
          z = i.TypeError,
          q = i.Uint8Array,
          K = "ArrayBuffer",
          J = "Shared" + K,
          Y = "BYTES_PER_ELEMENT",
          H = "prototype",
          $ = Array[H],
          X = f.ArrayBuffer,
          Q = f.DataView,
          Z = A(0),
          tt = A(2),
          nt = A(3),
          rt = A(4),
          et = A(5),
          it = A(6),
          ot = N(!0),
          ut = N(!1),
          ct = I.values,
          ft = I.keys,
          at = I.entries,
          st = $.lastIndexOf,
          lt = $.reduce,
          ht = $.reduceRight,
          vt = $.join,
          pt = $.sort,
          dt = $.slice,
          yt = $.toString,
          gt = $.toLocaleString,
          bt = M("iterator"),
          mt = M("toStringTag"),
          xt = F("typed_constructor"),
          wt = F("def_constructor"),
          St = c.CONSTR,
          _t = c.TYPED,
          Ot = c.VIEW,
          Et = "Wrong length!",
          Pt = A(1, function (t, n) {
            return Tt(T(t, t[wt]), n);
          }),
          jt = o(function () {
            return 1 === new q(new Uint16Array([1]).buffer)[0];
          }),
          Ft =
            !!q &&
            !!q[H].set &&
            o(function () {
              new q(1).set({});
            }),
          Mt = function (t, n) {
            if (void 0 === t) throw z(Et);
            var r = +t,
              e = d(t);
            if (n && !m(r, e)) throw V(Et);
            return e;
          },
          At = function (t, n) {
            var r = p(t);
            if (r < 0 || r % n) throw V("Wrong offset!");
            return r;
          },
          Nt = function (t) {
            if (w(t) && _t in t) return t;
            throw z(t + " is not a typed array!");
          },
          Tt = function (t, n) {
            if (!(w(t) && xt in t))
              throw z("It is not a typed array constructor!");
            return new t(n);
          },
          It = function (t, n) {
            return kt(T(t, t[wt]), n);
          },
          kt = function (t, n) {
            for (var r = 0, e = n.length, i = Tt(t, e); e > r; ) i[r] = n[r++];
            return i;
          },
          Lt = function (t, n, r) {
            G(t, n, {
              get: function () {
                return this._d[r];
              },
            });
          },
          Rt = function (t) {
            var n,
              r,
              e,
              i,
              o,
              u,
              c = S(t),
              f = arguments.length,
              s = f > 1 ? arguments[1] : void 0,
              l = void 0 !== s,
              h = j(c);
            if (void 0 != h && !_(h)) {
              for (u = h.call(c), e = [], n = 0; !(o = u.next()).done; n++)
                e.push(o.value);
              c = e;
            }
            for (
              l && f > 2 && (s = a(s, arguments[2], 2)),
                n = 0,
                r = d(c.length),
                i = Tt(this, r);
              r > n;
              n++
            )
              i[n] = l ? s(c[n], n) : c[n];
            return i;
          },
          Ct = function () {
            for (var t = 0, n = arguments.length, r = Tt(this, n); n > t; )
              r[t] = arguments[t++];
            return r;
          },
          Dt =
            !!q &&
            o(function () {
              gt.call(new q(1));
            }),
          Ut = function () {
            return gt.apply(Dt ? dt.call(Nt(this)) : Nt(this), arguments);
          },
          Wt = {
            copyWithin: function (t, n) {
              return D.call(
                Nt(this),
                t,
                n,
                arguments.length > 2 ? arguments[2] : void 0
              );
            },
            every: function (t) {
              return rt(
                Nt(this),
                t,
                arguments.length > 1 ? arguments[1] : void 0
              );
            },
            fill: function (t) {
              return C.apply(Nt(this), arguments);
            },
            filter: function (t) {
              return It(
                this,
                tt(Nt(this), t, arguments.length > 1 ? arguments[1] : void 0)
              );
            },
            find: function (t) {
              return et(
                Nt(this),
                t,
                arguments.length > 1 ? arguments[1] : void 0
              );
            },
            findIndex: function (t) {
              return it(
                Nt(this),
                t,
                arguments.length > 1 ? arguments[1] : void 0
              );
            },
            forEach: function (t) {
              Z(Nt(this), t, arguments.length > 1 ? arguments[1] : void 0);
            },
            indexOf: function (t) {
              return ut(
                Nt(this),
                t,
                arguments.length > 1 ? arguments[1] : void 0
              );
            },
            includes: function (t) {
              return ot(
                Nt(this),
                t,
                arguments.length > 1 ? arguments[1] : void 0
              );
            },
            join: function (t) {
              return vt.apply(Nt(this), arguments);
            },
            lastIndexOf: function (t) {
              return st.apply(Nt(this), arguments);
            },
            map: function (t) {
              return Pt(
                Nt(this),
                t,
                arguments.length > 1 ? arguments[1] : void 0
              );
            },
            reduce: function (t) {
              return lt.apply(Nt(this), arguments);
            },
            reduceRight: function (t) {
              return ht.apply(Nt(this), arguments);
            },
            reverse: function () {
              for (
                var t, n = this, r = Nt(n).length, e = Math.floor(r / 2), i = 0;
                i < e;

              )
                (t = n[i]), (n[i++] = n[--r]), (n[r] = t);
              return n;
            },
            some: function (t) {
              return nt(
                Nt(this),
                t,
                arguments.length > 1 ? arguments[1] : void 0
              );
            },
            sort: function (t) {
              return pt.call(Nt(this), t);
            },
            subarray: function (t, n) {
              var r = Nt(this),
                e = r.length,
                i = y(t, e);
              return new (T(r, r[wt]))(
                r.buffer,
                r.byteOffset + i * r.BYTES_PER_ELEMENT,
                d((void 0 === n ? e : y(n, e)) - i)
              );
            },
          },
          Gt = function (t, n) {
            return It(this, dt.call(Nt(this), t, n));
          },
          Bt = function (t) {
            Nt(this);
            var n = At(arguments[1], 1),
              r = this.length,
              e = S(t),
              i = d(e.length),
              o = 0;
            if (i + n > r) throw V(Et);
            for (; o < i; ) this[n + o] = e[o++];
          },
          Vt = {
            entries: function () {
              return at.call(Nt(this));
            },
            keys: function () {
              return ft.call(Nt(this));
            },
            values: function () {
              return ct.call(Nt(this));
            },
          },
          zt = function (t, n) {
            return (
              w(t) &&
              t[_t] &&
              "symbol" != typeof n &&
              n in t &&
              String(+n) == String(n)
            );
          },
          qt = function (t, n) {
            return zt(t, (n = g(n, !0))) ? l(2, t[n]) : B(t, n);
          },
          Kt = function (t, n, r) {
            return !(zt(t, (n = g(n, !0))) && w(r) && b(r, "value")) ||
              b(r, "get") ||
              b(r, "set") ||
              r.configurable ||
              (b(r, "writable") && !r.writable) ||
              (b(r, "enumerable") && !r.enumerable)
              ? G(t, n, r)
              : ((t[n] = r.value), t);
          };
        St || ((W.f = qt), (U.f = Kt)),
          u(u.S + u.F * !St, "Object", {
            getOwnPropertyDescriptor: qt,
            defineProperty: Kt,
          }),
          o(function () {
            yt.call({});
          }) &&
            (yt = gt =
              function () {
                return vt.call(this);
              });
        var Jt = v({}, Wt);
        v(Jt, Vt),
          h(Jt, bt, Vt.values),
          v(Jt, {
            slice: Gt,
            set: Bt,
            constructor: function () {},
            toString: yt,
            toLocaleString: Ut,
          }),
          Lt(Jt, "buffer", "b"),
          Lt(Jt, "byteOffset", "o"),
          Lt(Jt, "byteLength", "l"),
          Lt(Jt, "length", "e"),
          G(Jt, mt, {
            get: function () {
              return this[_t];
            },
          }),
          (t.exports = function (t, n, r, f) {
            f = !!f;
            var a = t + (f ? "Clamped" : "") + "Array",
              l = "Uint8Array" != a,
              v = "get" + t,
              p = "set" + t,
              y = i[a],
              g = y || {},
              b = y && E(y),
              m = !y || !c.ABV,
              S = {},
              _ = y && y[H],
              j = function (t, r) {
                var e = t._d;
                return e.v[v](r * n + e.o, jt);
              },
              F = function (t, r, e) {
                var i = t._d;
                f &&
                  (e = (e = Math.round(e)) < 0 ? 0 : e > 255 ? 255 : 255 & e),
                  i.v[p](r * n + i.o, e, jt);
              },
              M = function (t, n) {
                G(t, n, {
                  get: function () {
                    return j(this, n);
                  },
                  set: function (t) {
                    return F(this, n, t);
                  },
                  enumerable: !0,
                });
              };
            m
              ? ((y = r(function (t, r, e, i) {
                  s(t, y, a, "_d");
                  var o,
                    u,
                    c,
                    f,
                    l = 0,
                    v = 0;
                  if (w(r)) {
                    if (!(r instanceof X || (f = x(r)) == K || f == J))
                      return _t in r ? kt(y, r) : Rt.call(y, r);
                    (o = r), (v = At(e, n));
                    var p = r.byteLength;
                    if (void 0 === i) {
                      if (p % n) throw V(Et);
                      if ((u = p - v) < 0) throw V(Et);
                    } else if ((u = d(i) * n) + v > p) throw V(Et);
                    c = u / n;
                  } else (c = Mt(r, !0)), (u = c * n), (o = new X(u));
                  for (
                    h(t, "_d", { b: o, o: v, l: u, e: c, v: new Q(o) });
                    l < c;

                  )
                    M(t, l++);
                })),
                (_ = y[H] = O(Jt)),
                h(_, "constructor", y))
              : L(function (t) {
                  new y(null), new y(t);
                }, !0) ||
                ((y = r(function (t, r, e, i) {
                  s(t, y, a);
                  var o;
                  return w(r)
                    ? r instanceof X || (o = x(r)) == K || o == J
                      ? void 0 !== i
                        ? new g(r, At(e, n), i)
                        : void 0 !== e
                        ? new g(r, At(e, n))
                        : new g(r)
                      : _t in r
                      ? kt(y, r)
                      : Rt.call(y, r)
                    : new g(Mt(r, l));
                })),
                Z(
                  b !== Function.prototype ? P(g).concat(P(b)) : P(g),
                  function (t) {
                    t in y || h(y, t, g[t]);
                  }
                ),
                (y[H] = _),
                e || (_.constructor = y));
            var A = _[bt],
              N = !!A && ("values" == A.name || void 0 == A.name),
              T = Vt.values;
            h(y, xt, !0),
              h(_, _t, a),
              h(_, Ot, !0),
              h(_, wt, y),
              (f ? new y(1)[mt] == a : mt in _) ||
                G(_, mt, {
                  get: function () {
                    return a;
                  },
                }),
              (S[a] = y),
              u(u.G + u.W + u.F * (y != g), S),
              u(u.S, a, { BYTES_PER_ELEMENT: n, from: Rt, of: Ct }),
              Y in _ || h(_, Y, n),
              u(u.P, a, Wt),
              R(a),
              u(u.P + u.F * Ft, a, { set: Bt }),
              u(u.P + u.F * !N, a, Vt),
              u(u.P + u.F * (_.toString != yt), a, { toString: yt }),
              u(
                u.P +
                  u.F *
                    o(function () {
                      new y(1).slice();
                    }),
                a,
                { slice: Gt }
              ),
              u(
                u.P +
                  u.F *
                    (o(function () {
                      return (
                        [1, 2].toLocaleString() !=
                        new y([1, 2]).toLocaleString()
                      );
                    }) ||
                      !o(function () {
                        _.toLocaleString.call([1, 2]);
                      })),
                a,
                { toLocaleString: Ut }
              ),
              (k[a] = N ? A : T),
              e || N || h(_, bt, T);
          });
      } else t.exports = function () {};
    },
    function (t, n) {
      var r = {}.toString;
      t.exports = function (t) {
        return r.call(t).slice(8, -1);
      };
    },
    function (t, n, r) {
      var e = r(21),
        i = r(5).document,
        o = e(i) && e(i.createElement);
      t.exports = function (t) {
        return o ? i.createElement(t) : {};
      };
    },
    function (t, n, r) {
      t.exports =
        !r(12) &&
        !r(18)(function () {
          return (
            7 !=
            Object.defineProperty(r(57)("div"), "a", {
              get: function () {
                return 7;
              },
            }).a
          );
        });
    },
    function (t, n, r) {
      "use strict";
      var e = r(36),
        i = r(51),
        o = r(64),
        u = r(13),
        c = r(8),
        f = r(35),
        a = r(96),
        s = r(38),
        l = r(103),
        h = r(15)("iterator"),
        v = !([].keys && "next" in [].keys()),
        p = "keys",
        d = "values",
        y = function () {
          return this;
        };
      t.exports = function (t, n, r, g, b, m, x) {
        a(r, n, g);
        var w,
          S,
          _,
          O = function (t) {
            if (!v && t in F) return F[t];
            switch (t) {
              case p:
              case d:
                return function () {
                  return new r(this, t);
                };
            }
            return function () {
              return new r(this, t);
            };
          },
          E = n + " Iterator",
          P = b == d,
          j = !1,
          F = t.prototype,
          M = F[h] || F["@@iterator"] || (b && F[b]),
          A = M || O(b),
          N = b ? (P ? O("entries") : A) : void 0,
          T = "Array" == n ? F.entries || M : M;
        if (
          (T &&
            (_ = l(T.call(new t()))) !== Object.prototype &&
            (s(_, E, !0), e || c(_, h) || u(_, h, y)),
          P &&
            M &&
            M.name !== d &&
            ((j = !0),
            (A = function () {
              return M.call(this);
            })),
          (e && !x) || (!v && !j && F[h]) || u(F, h, A),
          (f[n] = A),
          (f[E] = y),
          b)
        )
          if (
            ((w = { values: P ? A : O(d), keys: m ? A : O(p), entries: N }), x)
          )
            for (S in w) S in F || o(F, S, w[S]);
          else i(i.P + i.F * (v || j), n, w);
        return w;
      };
    },
    function (t, n, r) {
      var e = r(20),
        i = r(100),
        o = r(34),
        u = r(39)("IE_PROTO"),
        c = function () {},
        f = "prototype",
        a = function () {
          var t,
            n = r(57)("iframe"),
            e = o.length;
          for (
            n.style.display = "none",
              r(93).appendChild(n),
              n.src = "javascript:",
              t = n.contentWindow.document,
              t.open(),
              t.write("<script>document.F=Object<\/script>"),
              t.close(),
              a = t.F;
            e--;

          )
            delete a[f][o[e]];
          return a();
        };
      t.exports =
        Object.create ||
        function (t, n) {
          var r;
          return (
            null !== t
              ? ((c[f] = e(t)), (r = new c()), (c[f] = null), (r[u] = t))
              : (r = a()),
            void 0 === n ? r : i(r, n)
          );
        };
    },
    function (t, n, r) {
      var e = r(63),
        i = r(34).concat("length", "prototype");
      n.f =
        Object.getOwnPropertyNames ||
        function (t) {
          return e(t, i);
        };
    },
    function (t, n) {
      n.f = Object.getOwnPropertySymbols;
    },
    function (t, n, r) {
      var e = r(8),
        i = r(9),
        o = r(90)(!1),
        u = r(39)("IE_PROTO");
      t.exports = function (t, n) {
        var r,
          c = i(t),
          f = 0,
          a = [];
        for (r in c) r != u && e(c, r) && a.push(r);
        for (; n.length > f; ) e(c, (r = n[f++])) && (~o(a, r) || a.push(r));
        return a;
      };
    },
    function (t, n, r) {
      t.exports = r(13);
    },
    function (t, n, r) {
      var e = r(76)("meta"),
        i = r(6),
        o = r(24),
        u = r(11).f,
        c = 0,
        f =
          Object.isExtensible ||
          function () {
            return !0;
          },
        a = !r(4)(function () {
          return f(Object.preventExtensions({}));
        }),
        s = function (t) {
          u(t, e, { value: { i: "O" + ++c, w: {} } });
        },
        l = function (t, n) {
          if (!i(t))
            return "symbol" == typeof t
              ? t
              : ("string" == typeof t ? "S" : "P") + t;
          if (!o(t, e)) {
            if (!f(t)) return "F";
            if (!n) return "E";
            s(t);
          }
          return t[e].i;
        },
        h = function (t, n) {
          if (!o(t, e)) {
            if (!f(t)) return !0;
            if (!n) return !1;
            s(t);
          }
          return t[e].w;
        },
        v = function (t) {
          return a && p.NEED && f(t) && !o(t, e) && s(t), t;
        },
        p = (t.exports = {
          KEY: e,
          NEED: !1,
          fastKey: l,
          getWeak: h,
          onFreeze: v,
        });
    },
    function (t, n) {
      t.exports = function (t, n) {
        return {
          enumerable: !(1 & t),
          configurable: !(2 & t),
          writable: !(4 & t),
          value: n,
        };
      };
    },
    function (t, n) {
      var r = Math.ceil,
        e = Math.floor;
      t.exports = function (t) {
        return isNaN((t = +t)) ? 0 : (t > 0 ? e : r)(t);
      };
    },
    function (t, n) {
      t.exports = function (t, n, r, e) {
        if (!(t instanceof n) || (void 0 !== e && e in t))
          throw TypeError(r + ": incorrect invocation!");
        return t;
      };
    },
    function (t, n) {
      t.exports = !1;
    },
    function (t, n, r) {
      var e = r(2),
        i = r(173),
        o = r(133),
        u = r(145)("IE_PROTO"),
        c = function () {},
        f = "prototype",
        a = function () {
          var t,
            n = r(132)("iframe"),
            e = o.length;
          for (
            n.style.display = "none",
              r(135).appendChild(n),
              n.src = "javascript:",
              t = n.contentWindow.document,
              t.open(),
              t.write("<script>document.F=Object<\/script>"),
              t.close(),
              a = t.F;
            e--;

          )
            delete a[f][o[e]];
          return a();
        };
      t.exports =
        Object.create ||
        function (t, n) {
          var r;
          return (
            null !== t
              ? ((c[f] = e(t)), (r = new c()), (c[f] = null), (r[u] = t))
              : (r = a()),
            void 0 === n ? r : i(r, n)
          );
        };
    },
    function (t, n, r) {
      var e = r(175),
        i = r(133).concat("length", "prototype");
      n.f =
        Object.getOwnPropertyNames ||
        function (t) {
          return e(t, i);
        };
    },
    function (t, n, r) {
      var e = r(175),
        i = r(133);
      t.exports =
        Object.keys ||
        function (t) {
          return e(t, i);
        };
    },
    function (t, n, r) {
      var e = r(28);
      t.exports = function (t, n, r) {
        for (var i in n) e(t, i, n[i], r);
        return t;
      };
    },
    function (t, n, r) {
      "use strict";
      var e = r(3),
        i = r(11),
        o = r(10),
        u = r(7)("species");
      t.exports = function (t) {
        var n = e[t];
        o &&
          n &&
          !n[u] &&
          i.f(n, u, {
            configurable: !0,
            get: function () {
              return this;
            },
          });
      };
    },
    function (t, n, r) {
      var e = r(67),
        i = Math.max,
        o = Math.min;
      t.exports = function (t, n) {
        return (t = e(t)), t < 0 ? i(t + n, 0) : o(t, n);
      };
    },
    function (t, n) {
      var r = 0,
        e = Math.random();
      t.exports = function (t) {
        return "Symbol(".concat(
          void 0 === t ? "" : t,
          ")_",
          (++r + e).toString(36)
        );
      };
    },
    function (t, n, r) {
      var e = r(33);
      t.exports = function (t) {
        return Object(e(t));
      };
    },
    function (t, n, r) {
      var e = r(7)("unscopables"),
        i = Array.prototype;
      void 0 == i[e] && r(27)(i, e, {}),
        (t.exports = function (t) {
          i[e][t] = !0;
        });
    },
    function (t, n, r) {
      var e = r(53),
        i = r(169),
        o = r(137),
        u = r(2),
        c = r(16),
        f = r(154),
        a = {},
        s = {},
        n = (t.exports = function (t, n, r, l, h) {
          var v,
            p,
            d,
            y,
            g = h
              ? function () {
                  return t;
                }
              : f(t),
            b = e(r, l, n ? 2 : 1),
            m = 0;
          if ("function" != typeof g) throw TypeError(t + " is not iterable!");
          if (o(g)) {
            for (v = c(t.length); v > m; m++)
              if (
                (y = n ? b(u((p = t[m]))[0], p[1]) : b(t[m])) === a ||
                y === s
              )
                return y;
          } else
            for (d = g.call(t); !(p = d.next()).done; )
              if ((y = i(d, b, p.value, n)) === a || y === s) return y;
        });
      (n.BREAK = a), (n.RETURN = s);
    },
    function (t, n) {
      t.exports = {};
    },
    function (t, n, r) {
      var e = r(11).f,
        i = r(24),
        o = r(7)("toStringTag");
      t.exports = function (t, n, r) {
        t &&
          !i((t = r ? t : t.prototype), o) &&
          e(t, o, { configurable: !0, value: n });
      };
    },
    function (t, n, r) {
      var e = r(1),
        i = r(46),
        o = r(4),
        u = r(150),
        c = "[" + u + "]",
        f = "​",
        a = RegExp("^" + c + c + "*"),
        s = RegExp(c + c + "*$"),
        l = function (t, n, r) {
          var i = {},
            c = o(function () {
              return !!u[t]() || f[t]() != f;
            }),
            a = (i[t] = c ? n(h) : u[t]);
          r && (i[r] = a), e(e.P + e.F * c, "String", i);
        },
        h = (l.trim = function (t, n) {
          return (
            (t = String(i(t))),
            1 & n && (t = t.replace(a, "")),
            2 & n && (t = t.replace(s, "")),
            t
          );
        });
      t.exports = l;
    },
    function (t, n, r) {
      t.exports = { default: r(86), __esModule: !0 };
    },
    function (t, n, r) {
      t.exports = { default: r(87), __esModule: !0 };
    },
    function (t, n, r) {
      "use strict";
      function e(t) {
        return t && t.__esModule ? t : { default: t };
      }
      n.__esModule = !0;
      var i = r(84),
        o = e(i),
        u = r(83),
        c = e(u),
        f =
          "function" == typeof c.default && "symbol" == typeof o.default
            ? function (t) {
                return typeof t;
              }
            : function (t) {
                return t &&
                  "function" == typeof c.default &&
                  t.constructor === c.default &&
                  t !== c.default.prototype
                  ? "symbol"
                  : typeof t;
              };
      n.default =
        "function" == typeof c.default && "symbol" === f(o.default)
          ? function (t) {
              return void 0 === t ? "undefined" : f(t);
            }
          : function (t) {
              return t &&
                "function" == typeof c.default &&
                t.constructor === c.default &&
                t !== c.default.prototype
                ? "symbol"
                : void 0 === t
                ? "undefined"
                : f(t);
            };
    },
    function (t, n, r) {
      r(110), r(108), r(111), r(112), (t.exports = r(25).Symbol);
    },
    function (t, n, r) {
      r(109), r(113), (t.exports = r(44).f("iterator"));
    },
    function (t, n) {
      t.exports = function (t) {
        if ("function" != typeof t) throw TypeError(t + " is not a function!");
        return t;
      };
    },
    function (t, n) {
      t.exports = function () {};
    },
    function (t, n, r) {
      var e = r(9),
        i = r(106),
        o = r(105);
      t.exports = function (t) {
        return function (n, r, u) {
          var c,
            f = e(n),
            a = i(f.length),
            s = o(u, a);
          if (t && r != r) {
            for (; a > s; ) if ((c = f[s++]) != c) return !0;
          } else
            for (; a > s; s++)
              if ((t || s in f) && f[s] === r) return t || s || 0;
          return !t && -1;
        };
      };
    },
    function (t, n, r) {
      var e = r(88);
      t.exports = function (t, n, r) {
        if ((e(t), void 0 === n)) return t;
        switch (r) {
          case 1:
            return function (r) {
              return t.call(n, r);
            };
          case 2:
            return function (r, e) {
              return t.call(n, r, e);
            };
          case 3:
            return function (r, e, i) {
              return t.call(n, r, e, i);
            };
        }
        return function () {
          return t.apply(n, arguments);
        };
      };
    },
    function (t, n, r) {
      var e = r(19),
        i = r(62),
        o = r(37);
      t.exports = function (t) {
        var n = e(t),
          r = i.f;
        if (r)
          for (var u, c = r(t), f = o.f, a = 0; c.length > a; )
            f.call(t, (u = c[a++])) && n.push(u);
        return n;
      };
    },
    function (t, n, r) {
      t.exports = r(5).document && document.documentElement;
    },
    function (t, n, r) {
      var e = r(56);
      t.exports = Object("z").propertyIsEnumerable(0)
        ? Object
        : function (t) {
            return "String" == e(t) ? t.split("") : Object(t);
          };
    },
    function (t, n, r) {
      var e = r(56);
      t.exports =
        Array.isArray ||
        function (t) {
          return "Array" == e(t);
        };
    },
    function (t, n, r) {
      "use strict";
      var e = r(60),
        i = r(22),
        o = r(38),
        u = {};
      r(13)(u, r(15)("iterator"), function () {
        return this;
      }),
        (t.exports = function (t, n, r) {
          (t.prototype = e(u, { next: i(1, r) })), o(t, n + " Iterator");
        });
    },
    function (t, n) {
      t.exports = function (t, n) {
        return { value: n, done: !!t };
      };
    },
    function (t, n, r) {
      var e = r(19),
        i = r(9);
      t.exports = function (t, n) {
        for (var r, o = i(t), u = e(o), c = u.length, f = 0; c > f; )
          if (o[(r = u[f++])] === n) return r;
      };
    },
    function (t, n, r) {
      var e = r(23)("meta"),
        i = r(21),
        o = r(8),
        u = r(14).f,
        c = 0,
        f =
          Object.isExtensible ||
          function () {
            return !0;
          },
        a = !r(18)(function () {
          return f(Object.preventExtensions({}));
        }),
        s = function (t) {
          u(t, e, { value: { i: "O" + ++c, w: {} } });
        },
        l = function (t, n) {
          if (!i(t))
            return "symbol" == typeof t
              ? t
              : ("string" == typeof t ? "S" : "P") + t;
          if (!o(t, e)) {
            if (!f(t)) return "F";
            if (!n) return "E";
            s(t);
          }
          return t[e].i;
        },
        h = function (t, n) {
          if (!o(t, e)) {
            if (!f(t)) return !0;
            if (!n) return !1;
            s(t);
          }
          return t[e].w;
        },
        v = function (t) {
          return a && p.NEED && f(t) && !o(t, e) && s(t), t;
        },
        p = (t.exports = {
          KEY: e,
          NEED: !1,
          fastKey: l,
          getWeak: h,
          onFreeze: v,
        });
    },
    function (t, n, r) {
      var e = r(14),
        i = r(20),
        o = r(19);
      t.exports = r(12)
        ? Object.defineProperties
        : function (t, n) {
            i(t);
            for (var r, u = o(n), c = u.length, f = 0; c > f; )
              e.f(t, (r = u[f++]), n[r]);
            return t;
          };
    },
    function (t, n, r) {
      var e = r(37),
        i = r(22),
        o = r(9),
        u = r(42),
        c = r(8),
        f = r(58),
        a = Object.getOwnPropertyDescriptor;
      n.f = r(12)
        ? a
        : function (t, n) {
            if (((t = o(t)), (n = u(n, !0)), f))
              try {
                return a(t, n);
              } catch (t) {}
            if (c(t, n)) return i(!e.f.call(t, n), t[n]);
          };
    },
    function (t, n, r) {
      var e = r(9),
        i = r(61).f,
        o = {}.toString,
        u =
          "object" == typeof window && window && Object.getOwnPropertyNames
            ? Object.getOwnPropertyNames(window)
            : [],
        c = function (t) {
          try {
            return i(t);
          } catch (t) {
            return u.slice();
          }
        };
      t.exports.f = function (t) {
        return u && "[object Window]" == o.call(t) ? c(t) : i(e(t));
      };
    },
    function (t, n, r) {
      var e = r(8),
        i = r(77),
        o = r(39)("IE_PROTO"),
        u = Object.prototype;
      t.exports =
        Object.getPrototypeOf ||
        function (t) {
          return (
            (t = i(t)),
            e(t, o)
              ? t[o]
              : "function" == typeof t.constructor && t instanceof t.constructor
              ? t.constructor.prototype
              : t instanceof Object
              ? u
              : null
          );
        };
    },
    function (t, n, r) {
      var e = r(41),
        i = r(33);
      t.exports = function (t) {
        return function (n, r) {
          var o,
            u,
            c = String(i(n)),
            f = e(r),
            a = c.length;
          return f < 0 || f >= a
            ? t
              ? ""
              : void 0
            : ((o = c.charCodeAt(f)),
              o < 55296 ||
              o > 56319 ||
              f + 1 === a ||
              (u = c.charCodeAt(f + 1)) < 56320 ||
              u > 57343
                ? t
                  ? c.charAt(f)
                  : o
                : t
                ? c.slice(f, f + 2)
                : u - 56320 + ((o - 55296) << 10) + 65536);
        };
      };
    },
    function (t, n, r) {
      var e = r(41),
        i = Math.max,
        o = Math.min;
      t.exports = function (t, n) {
        return (t = e(t)), t < 0 ? i(t + n, 0) : o(t, n);
      };
    },
    function (t, n, r) {
      var e = r(41),
        i = Math.min;
      t.exports = function (t) {
        return t > 0 ? i(e(t), 9007199254740991) : 0;
      };
    },
    function (t, n, r) {
      "use strict";
      var e = r(89),
        i = r(97),
        o = r(35),
        u = r(9);
      (t.exports = r(59)(
        Array,
        "Array",
        function (t, n) {
          (this._t = u(t)), (this._i = 0), (this._k = n);
        },
        function () {
          var t = this._t,
            n = this._k,
            r = this._i++;
          return !t || r >= t.length
            ? ((this._t = void 0), i(1))
            : "keys" == n
            ? i(0, r)
            : "values" == n
            ? i(0, t[r])
            : i(0, [r, t[r]]);
        },
        "values"
      )),
        (o.Arguments = o.Array),
        e("keys"),
        e("values"),
        e("entries");
    },
    function (t, n) {},
    function (t, n, r) {
      "use strict";
      var e = r(104)(!0);
      r(59)(
        String,
        "String",
        function (t) {
          (this._t = String(t)), (this._i = 0);
        },
        function () {
          var t,
            n = this._t,
            r = this._i;
          return r >= n.length
            ? { value: void 0, done: !0 }
            : ((t = e(n, r)), (this._i += t.length), { value: t, done: !1 });
        }
      );
    },
    function (t, n, r) {
      "use strict";
      var e = r(5),
        i = r(8),
        o = r(12),
        u = r(51),
        c = r(64),
        f = r(99).KEY,
        a = r(18),
        s = r(40),
        l = r(38),
        h = r(23),
        v = r(15),
        p = r(44),
        d = r(43),
        y = r(98),
        g = r(92),
        b = r(95),
        m = r(20),
        x = r(9),
        w = r(42),
        S = r(22),
        _ = r(60),
        O = r(102),
        E = r(101),
        P = r(14),
        j = r(19),
        F = E.f,
        M = P.f,
        A = O.f,
        N = e.Symbol,
        T = e.JSON,
        I = T && T.stringify,
        k = "prototype",
        L = v("_hidden"),
        R = v("toPrimitive"),
        C = {}.propertyIsEnumerable,
        D = s("symbol-registry"),
        U = s("symbols"),
        W = s("op-symbols"),
        G = Object[k],
        B = "function" == typeof N,
        V = e.QObject,
        z = !V || !V[k] || !V[k].findChild,
        q =
          o &&
          a(function () {
            return (
              7 !=
              _(
                M({}, "a", {
                  get: function () {
                    return M(this, "a", { value: 7 }).a;
                  },
                })
              ).a
            );
          })
            ? function (t, n, r) {
                var e = F(G, n);
                e && delete G[n], M(t, n, r), e && t !== G && M(G, n, e);
              }
            : M,
        K = function (t) {
          var n = (U[t] = _(N[k]));
          return (n._k = t), n;
        },
        J =
          B && "symbol" == typeof N.iterator
            ? function (t) {
                return "symbol" == typeof t;
              }
            : function (t) {
                return t instanceof N;
              },
        Y = function (t, n, r) {
          return (
            t === G && Y(W, n, r),
            m(t),
            (n = w(n, !0)),
            m(r),
            i(U, n)
              ? (r.enumerable
                  ? (i(t, L) && t[L][n] && (t[L][n] = !1),
                    (r = _(r, { enumerable: S(0, !1) })))
                  : (i(t, L) || M(t, L, S(1, {})), (t[L][n] = !0)),
                q(t, n, r))
              : M(t, n, r)
          );
        },
        H = function (t, n) {
          m(t);
          for (var r, e = g((n = x(n))), i = 0, o = e.length; o > i; )
            Y(t, (r = e[i++]), n[r]);
          return t;
        },
        $ = function (t, n) {
          return void 0 === n ? _(t) : H(_(t), n);
        },
        X = function (t) {
          var n = C.call(this, (t = w(t, !0)));
          return (
            !(this === G && i(U, t) && !i(W, t)) &&
            (!(n || !i(this, t) || !i(U, t) || (i(this, L) && this[L][t])) || n)
          );
        },
        Q = function (t, n) {
          if (((t = x(t)), (n = w(n, !0)), t !== G || !i(U, n) || i(W, n))) {
            var r = F(t, n);
            return (
              !r || !i(U, n) || (i(t, L) && t[L][n]) || (r.enumerable = !0), r
            );
          }
        },
        Z = function (t) {
          for (var n, r = A(x(t)), e = [], o = 0; r.length > o; )
            i(U, (n = r[o++])) || n == L || n == f || e.push(n);
          return e;
        },
        tt = function (t) {
          for (
            var n, r = t === G, e = A(r ? W : x(t)), o = [], u = 0;
            e.length > u;

          )
            !i(U, (n = e[u++])) || (r && !i(G, n)) || o.push(U[n]);
          return o;
        };
      B ||
        ((N = function () {
          if (this instanceof N)
            throw TypeError("Symbol is not a constructor!");
          var t = h(arguments.length > 0 ? arguments[0] : void 0),
            n = function (r) {
              this === G && n.call(W, r),
                i(this, L) && i(this[L], t) && (this[L][t] = !1),
                q(this, t, S(1, r));
            };
          return o && z && q(G, t, { configurable: !0, set: n }), K(t);
        }),
        c(N[k], "toString", function () {
          return this._k;
        }),
        (E.f = Q),
        (P.f = Y),
        (r(61).f = O.f = Z),
        (r(37).f = X),
        (r(62).f = tt),
        o && !r(36) && c(G, "propertyIsEnumerable", X, !0),
        (p.f = function (t) {
          return K(v(t));
        })),
        u(u.G + u.W + u.F * !B, { Symbol: N });
      for (
        var nt =
            "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(
              ","
            ),
          rt = 0;
        nt.length > rt;

      )
        v(nt[rt++]);
      for (var nt = j(v.store), rt = 0; nt.length > rt; ) d(nt[rt++]);
      u(u.S + u.F * !B, "Symbol", {
        for: function (t) {
          return i(D, (t += "")) ? D[t] : (D[t] = N(t));
        },
        keyFor: function (t) {
          if (J(t)) return y(D, t);
          throw TypeError(t + " is not a symbol!");
        },
        useSetter: function () {
          z = !0;
        },
        useSimple: function () {
          z = !1;
        },
      }),
        u(u.S + u.F * !B, "Object", {
          create: $,
          defineProperty: Y,
          defineProperties: H,
          getOwnPropertyDescriptor: Q,
          getOwnPropertyNames: Z,
          getOwnPropertySymbols: tt,
        }),
        T &&
          u(
            u.S +
              u.F *
                (!B ||
                  a(function () {
                    var t = N();
                    return (
                      "[null]" != I([t]) ||
                      "{}" != I({ a: t }) ||
                      "{}" != I(Object(t))
                    );
                  })),
            "JSON",
            {
              stringify: function (t) {
                if (void 0 !== t && !J(t)) {
                  for (var n, r, e = [t], i = 1; arguments.length > i; )
                    e.push(arguments[i++]);
                  return (
                    (n = e[1]),
                    "function" == typeof n && (r = n),
                    (!r && b(n)) ||
                      (n = function (t, n) {
                        if ((r && (n = r.call(this, t, n)), !J(n))) return n;
                      }),
                    (e[1] = n),
                    I.apply(T, e)
                  );
                }
              },
            }
          ),
        N[k][R] || r(13)(N[k], R, N[k].valueOf),
        l(N, "Symbol"),
        l(Math, "Math", !0),
        l(e.JSON, "JSON", !0);
    },
    function (t, n, r) {
      r(43)("asyncIterator");
    },
    function (t, n, r) {
      r(43)("observable");
    },
    function (t, n, r) {
      r(107);
      for (
        var e = r(5),
          i = r(13),
          o = r(35),
          u = r(15)("toStringTag"),
          c = [
            "NodeList",
            "DOMTokenList",
            "MediaList",
            "StyleSheetList",
            "CSSRuleList",
          ],
          f = 0;
        f < 5;
        f++
      ) {
        var a = c[f],
          s = e[a],
          l = s && s.prototype;
        l && !l[u] && i(l, u, a), (o[a] = o.Array);
      }
    },
    function (t, n, r) {
      var e = r(45),
        i = r(7)("toStringTag"),
        o =
          "Arguments" ==
          e(
            (function () {
              return arguments;
            })()
          ),
        u = function (t, n) {
          try {
            return t[n];
          } catch (t) {}
        };
      t.exports = function (t) {
        var n, r, c;
        return void 0 === t
          ? "Undefined"
          : null === t
          ? "Null"
          : "string" == typeof (r = u((n = Object(t)), i))
          ? r
          : o
          ? e(n)
          : "Object" == (c = e(n)) && "function" == typeof n.callee
          ? "Arguments"
          : c;
      };
    },
    function (t, n, r) {
      var e = r(45);
      t.exports = Object("z").propertyIsEnumerable(0)
        ? Object
        : function (t) {
            return "String" == e(t) ? t.split("") : Object(t);
          };
    },
    function (t, n) {
      n.f = {}.propertyIsEnumerable;
    },
    function (t, n, r) {
      var e = r(30),
        i = r(16),
        o = r(75);
      t.exports = function (t) {
        return function (n, r, u) {
          var c,
            f = e(n),
            a = i(f.length),
            s = o(u, a);
          if (t && r != r) {
            for (; a > s; ) if ((c = f[s++]) != c) return !0;
          } else
            for (; a > s; s++)
              if ((t || s in f) && f[s] === r) return t || s || 0;
          return !t && -1;
        };
      };
    },
    function (t, n, r) {
      "use strict";
      var e = r(3),
        i = r(1),
        o = r(28),
        u = r(73),
        c = r(65),
        f = r(79),
        a = r(68),
        s = r(6),
        l = r(4),
        h = r(123),
        v = r(81),
        p = r(136);
      t.exports = function (t, n, r, d, y, g) {
        var b = e[t],
          m = b,
          x = y ? "set" : "add",
          w = m && m.prototype,
          S = {},
          _ = function (t) {
            var n = w[t];
            o(
              w,
              t,
              "delete" == t
                ? function (t) {
                    return !(g && !s(t)) && n.call(this, 0 === t ? 0 : t);
                  }
                : "has" == t
                ? function (t) {
                    return !(g && !s(t)) && n.call(this, 0 === t ? 0 : t);
                  }
                : "get" == t
                ? function (t) {
                    return g && !s(t) ? void 0 : n.call(this, 0 === t ? 0 : t);
                  }
                : "add" == t
                ? function (t) {
                    return n.call(this, 0 === t ? 0 : t), this;
                  }
                : function (t, r) {
                    return n.call(this, 0 === t ? 0 : t, r), this;
                  }
            );
          };
        if (
          "function" == typeof m &&
          (g ||
            (w.forEach &&
              !l(function () {
                new m().entries().next();
              })))
        ) {
          var O = new m(),
            E = O[x](g ? {} : -0, 1) != O,
            P = l(function () {
              O.has(1);
            }),
            j = h(function (t) {
              new m(t);
            }),
            F =
              !g &&
              l(function () {
                for (var t = new m(), n = 5; n--; ) t[x](n, n);
                return !t.has(-0);
              });
          j ||
            ((m = n(function (n, r) {
              a(n, m, t);
              var e = p(new b(), n, m);
              return void 0 != r && f(r, y, e[x], e), e;
            })),
            (m.prototype = w),
            (w.constructor = m)),
            (P || F) && (_("delete"), _("has"), y && _("get")),
            (F || E) && _(x),
            g && w.clear && delete w.clear;
        } else
          (m = d.getConstructor(n, t, y, x)), u(m.prototype, r), (c.NEED = !0);
        return (
          v(m, t),
          (S[t] = m),
          i(i.G + i.W + i.F * (m != b), S),
          g || d.setStrong(m, t, y),
          m
        );
      };
    },
    function (t, n, r) {
      "use strict";
      var e = r(27),
        i = r(28),
        o = r(4),
        u = r(46),
        c = r(7);
      t.exports = function (t, n, r) {
        var f = c(t),
          a = r(u, f, ""[t]),
          s = a[0],
          l = a[1];
        o(function () {
          var n = {};
          return (
            (n[f] = function () {
              return 7;
            }),
            7 != ""[t](n)
          );
        }) &&
          (i(String.prototype, t, s),
          e(
            RegExp.prototype,
            f,
            2 == n
              ? function (t, n) {
                  return l.call(t, this, n);
                }
              : function (t) {
                  return l.call(t, this);
                }
          ));
      };
    },
    function (t, n, r) {
      "use strict";
      var e = r(2);
      t.exports = function () {
        var t = e(this),
          n = "";
        return (
          t.global && (n += "g"),
          t.ignoreCase && (n += "i"),
          t.multiline && (n += "m"),
          t.unicode && (n += "u"),
          t.sticky && (n += "y"),
          n
        );
      };
    },
    function (t, n) {
      t.exports = function (t, n, r) {
        var e = void 0 === r;
        switch (n.length) {
          case 0:
            return e ? t() : t.call(r);
          case 1:
            return e ? t(n[0]) : t.call(r, n[0]);
          case 2:
            return e ? t(n[0], n[1]) : t.call(r, n[0], n[1]);
          case 3:
            return e ? t(n[0], n[1], n[2]) : t.call(r, n[0], n[1], n[2]);
          case 4:
            return e
              ? t(n[0], n[1], n[2], n[3])
              : t.call(r, n[0], n[1], n[2], n[3]);
        }
        return t.apply(r, n);
      };
    },
    function (t, n, r) {
      var e = r(6),
        i = r(45),
        o = r(7)("match");
      t.exports = function (t) {
        var n;
        return e(t) && (void 0 !== (n = t[o]) ? !!n : "RegExp" == i(t));
      };
    },
    function (t, n, r) {
      var e = r(7)("iterator"),
        i = !1;
      try {
        var o = [7][e]();
        (o.return = function () {
          i = !0;
        }),
          Array.from(o, function () {
            throw 2;
          });
      } catch (t) {}
      t.exports = function (t, n) {
        if (!n && !i) return !1;
        var r = !1;
        try {
          var o = [7],
            u = o[e]();
          (u.next = function () {
            return { done: (r = !0) };
          }),
            (o[e] = function () {
              return u;
            }),
            t(o);
        } catch (t) {}
        return r;
      };
    },
    function (t, n, r) {
      t.exports =
        r(69) ||
        !r(4)(function () {
          var t = Math.random();
          __defineSetter__.call(null, t, function () {}), delete r(3)[t];
        });
    },
    function (t, n) {
      n.f = Object.getOwnPropertySymbols;
    },
    function (t, n, r) {
      var e = r(3),
        i = "__core-js_shared__",
        o = e[i] || (e[i] = {});
      t.exports = function (t) {
        return o[t] || (o[t] = {});
      };
    },
    function (t, n, r) {
      for (
        var e,
          i = r(3),
          o = r(27),
          u = r(76),
          c = u("typed_array"),
          f = u("view"),
          a = !(!i.ArrayBuffer || !i.DataView),
          s = a,
          l = 0,
          h =
            "Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(
              ","
            );
        l < 9;

      )
        (e = i[h[l++]])
          ? (o(e.prototype, c, !0), o(e.prototype, f, !0))
          : (s = !1);
      t.exports = { ABV: a, CONSTR: s, TYPED: c, VIEW: f };
    },
    function (t, n) {
      "use strict";
      var r = {
        versions: (function () {
          var t = window.navigator.userAgent;
          return {
            trident: t.indexOf("Trident") > -1,
            presto: t.indexOf("Presto") > -1,
            webKit: t.indexOf("AppleWebKit") > -1,
            gecko: t.indexOf("Gecko") > -1 && -1 == t.indexOf("KHTML"),
            mobile: !!t.match(/AppleWebKit.*Mobile.*/),
            ios: !!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),
            android: t.indexOf("Android") > -1 || t.indexOf("Linux") > -1,
            iPhone: t.indexOf("iPhone") > -1 || t.indexOf("Mac") > -1,
            iPad: t.indexOf("iPad") > -1,
            webApp: -1 == t.indexOf("Safari"),
            weixin: -1 == t.indexOf("MicroMessenger"),
          };
        })(),
      };
      t.exports = r;
    },
    function (t, n, r) {
      "use strict";
      var e = r(85),
        i = (function (t) {
          return t && t.__esModule ? t : { default: t };
        })(e),
        o = (function () {
          function t(t, n, e) {
            return n || e ? String.fromCharCode(n || e) : r[t] || t;
          }
          function n(t) {
            return e[t];
          }
          var r = {
              "&quot;": '"',
              "&lt;": "<",
              "&gt;": ">",
              "&amp;": "&",
              "&nbsp;": " ",
            },
            e = {};
          for (var u in r) e[r[u]] = u;
          return (
            (r["&apos;"] = "'"),
            (e["'"] = "&#39;"),
            {
              encode: function (t) {
                return t
                  ? ("" + t)
                      .replace(/['<> "&]/g, n)
                      .replace(/\r?\n/g, "<br/>")
                      .replace(/\s/g, "&nbsp;")
                  : "";
              },
              decode: function (n) {
                return n
                  ? ("" + n)
                      .replace(/<br\s*\/?>/gi, "\n")
                      .replace(
                        /&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,
                        t
                      )
                      .replace(/\u00a0/g, " ")
                  : "";
              },
              encodeBase16: function (t) {
                if (!t) return t;
                t += "";
                for (var n = [], r = 0, e = t.length; e > r; r++)
                  n.push(t.charCodeAt(r).toString(16).toUpperCase());
                return n.join("");
              },
              encodeBase16forJSON: function (t) {
                if (!t) return t;
                t = t.replace(/[\u4E00-\u9FBF]/gi, function (t) {
                  return escape(t).replace("%u", "\\u");
                });
                for (var n = [], r = 0, e = t.length; e > r; r++)
                  n.push(t.charCodeAt(r).toString(16).toUpperCase());
                return n.join("");
              },
              decodeBase16: function (t) {
                if (!t) return t;
                t += "";
                for (var n = [], r = 0, e = t.length; e > r; r += 2)
                  n.push(String.fromCharCode("0x" + t.slice(r, r + 2)));
                return n.join("");
              },
              encodeObject: function (t) {
                if (t instanceof Array)
                  for (var n = 0, r = t.length; r > n; n++)
                    t[n] = o.encodeObject(t[n]);
                else if (
                  "object" == (void 0 === t ? "undefined" : (0, i.default)(t))
                )
                  for (var e in t) t[e] = o.encodeObject(t[e]);
                else if ("string" == typeof t) return o.encode(t);
                return t;
              },
              loadScript: function (t) {
                var n = document.createElement("script");
                document.getElementsByTagName("body")[0].appendChild(n),
                  n.setAttribute("src", t);
              },
              addLoadEvent: function (t) {
                var n = window.onload;
                "function" != typeof window.onload
                  ? (window.onload = t)
                  : (window.onload = function () {
                      n(), t();
                    });
              },
            }
          );
        })();
      t.exports = o;
    },
    function (t, n, r) {
      "use strict";
      var e = r(17),
        i = r(75),
        o = r(16);
      t.exports = function (t) {
        for (
          var n = e(this),
            r = o(n.length),
            u = arguments.length,
            c = i(u > 1 ? arguments[1] : void 0, r),
            f = u > 2 ? arguments[2] : void 0,
            a = void 0 === f ? r : i(f, r);
          a > c;

        )
          n[c++] = t;
        return n;
      };
    },
    function (t, n, r) {
      "use strict";
      var e = r(11),
        i = r(66);
      t.exports = function (t, n, r) {
        n in t ? e.f(t, n, i(0, r)) : (t[n] = r);
      };
    },
    function (t, n, r) {
      var e = r(6),
        i = r(3).document,
        o = e(i) && e(i.createElement);
      t.exports = function (t) {
        return o ? i.createElement(t) : {};
      };
    },
    function (t, n) {
      t.exports =
        "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(
          ","
        );
    },
    function (t, n, r) {
      var e = r(7)("match");
      t.exports = function (t) {
        var n = /./;
        try {
          "/./"[t](n);
        } catch (r) {
          try {
            return (n[e] = !1), !"/./"[t](n);
          } catch (t) {}
        }
        return !0;
      };
    },
    function (t, n, r) {
      t.exports = r(3).document && document.documentElement;
    },
    function (t, n, r) {
      var e = r(6),
        i = r(144).set;
      t.exports = function (t, n, r) {
        var o,
          u = n.constructor;
        return (
          u !== r &&
            "function" == typeof u &&
            (o = u.prototype) !== r.prototype &&
            e(o) &&
            i &&
            i(t, o),
          t
        );
      };
    },
    function (t, n, r) {
      var e = r(80),
        i = r(7)("iterator"),
        o = Array.prototype;
      t.exports = function (t) {
        return void 0 !== t && (e.Array === t || o[i] === t);
      };
    },
    function (t, n, r) {
      var e = r(45);
      t.exports =
        Array.isArray ||
        function (t) {
          return "Array" == e(t);
        };
    },
    function (t, n, r) {
      "use strict";
      var e = r(70),
        i = r(66),
        o = r(81),
        u = {};
      r(27)(u, r(7)("iterator"), function () {
        return this;
      }),
        (t.exports = function (t, n, r) {
          (t.prototype = e(u, { next: i(1, r) })), o(t, n + " Iterator");
        });
    },
    function (t, n, r) {
      "use strict";
      var e = r(69),
        i = r(1),
        o = r(28),
        u = r(27),
        c = r(24),
        f = r(80),
        a = r(139),
        s = r(81),
        l = r(32),
        h = r(7)("iterator"),
        v = !([].keys && "next" in [].keys()),
        p = "keys",
        d = "values",
        y = function () {
          return this;
        };
      t.exports = function (t, n, r, g, b, m, x) {
        a(r, n, g);
        var w,
          S,
          _,
          O = function (t) {
            if (!v && t in F) return F[t];
            switch (t) {
              case p:
              case d:
                return function () {
                  return new r(this, t);
                };
            }
            return function () {
              return new r(this, t);
            };
          },
          E = n + " Iterator",
          P = b == d,
          j = !1,
          F = t.prototype,
          M = F[h] || F["@@iterator"] || (b && F[b]),
          A = M || O(b),
          N = b ? (P ? O("entries") : A) : void 0,
          T = "Array" == n ? F.entries || M : M;
        if (
          (T &&
            (_ = l(T.call(new t()))) !== Object.prototype &&
            (s(_, E, !0), e || c(_, h) || u(_, h, y)),
          P &&
            M &&
            M.name !== d &&
            ((j = !0),
            (A = function () {
              return M.call(this);
            })),
          (e && !x) || (!v && !j && F[h]) || u(F, h, A),
          (f[n] = A),
          (f[E] = y),
          b)
        )
          if (
            ((w = { values: P ? A : O(d), keys: m ? A : O(p), entries: N }), x)
          )
            for (S in w) S in F || o(F, S, w[S]);
          else i(i.P + i.F * (v || j), n, w);
        return w;
      };
    },
    function (t, n) {
      var r = Math.expm1;
      t.exports =
        !r ||
        r(10) > 22025.465794806718 ||
        r(10) < 22025.465794806718 ||
        -2e-17 != r(-2e-17)
          ? function (t) {
              return 0 == (t = +t)
                ? t
                : t > -1e-6 && t < 1e-6
                ? t + (t * t) / 2
                : Math.exp(t) - 1;
            }
          : r;
    },
    function (t, n) {
      t.exports =
        Math.sign ||
        function (t) {
          return 0 == (t = +t) || t != t ? t : t < 0 ? -1 : 1;
        };
    },
    function (t, n, r) {
      var e = r(3),
        i = r(151).set,
        o = e.MutationObserver || e.WebKitMutationObserver,
        u = e.process,
        c = e.Promise,
        f = "process" == r(45)(u);
      t.exports = function () {
        var t,
          n,
          r,
          a = function () {
            var e, i;
            for (f && (e = u.domain) && e.exit(); t; ) {
              (i = t.fn), (t = t.next);
              try {
                i();
              } catch (e) {
                throw (t ? r() : (n = void 0), e);
              }
            }
            (n = void 0), e && e.enter();
          };
        if (f)
          r = function () {
            u.nextTick(a);
          };
        else if (o) {
          var s = !0,
            l = document.createTextNode("");
          new o(a).observe(l, { characterData: !0 }),
            (r = function () {
              l.data = s = !s;
            });
        } else if (c && c.resolve) {
          var h = c.resolve();
          r = function () {
            h.then(a);
          };
        } else
          r = function () {
            i.call(e, a);
          };
        return function (e) {
          var i = { fn: e, next: void 0 };
          n && (n.next = i), t || ((t = i), r()), (n = i);
        };
      };
    },
    function (t, n, r) {
      var e = r(6),
        i = r(2),
        o = function (t, n) {
          if ((i(t), !e(n) && null !== n))
            throw TypeError(n + ": can't set as prototype!");
        };
      t.exports = {
        set:
          Object.setPrototypeOf ||
          ("__proto__" in {}
            ? (function (t, n, e) {
                try {
                  (e = r(53)(
                    Function.call,
                    r(31).f(Object.prototype, "__proto__").set,
                    2
                  )),
                    e(t, []),
                    (n = !(t instanceof Array));
                } catch (t) {
                  n = !0;
                }
                return function (t, r) {
                  return o(t, r), n ? (t.__proto__ = r) : e(t, r), t;
                };
              })({}, !1)
            : void 0),
        check: o,
      };
    },
    function (t, n, r) {
      var e = r(126)("keys"),
        i = r(76);
      t.exports = function (t) {
        return e[t] || (e[t] = i(t));
      };
    },
    function (t, n, r) {
      var e = r(2),
        i = r(26),
        o = r(7)("species");
      t.exports = function (t, n) {
        var r,
          u = e(t).constructor;
        return void 0 === u || void 0 == (r = e(u)[o]) ? n : i(r);
      };
    },
    function (t, n, r) {
      var e = r(67),
        i = r(46);
      t.exports = function (t) {
        return function (n, r) {
          var o,
            u,
            c = String(i(n)),
            f = e(r),
            a = c.length;
          return f < 0 || f >= a
            ? t
              ? ""
              : void 0
            : ((o = c.charCodeAt(f)),
              o < 55296 ||
              o > 56319 ||
              f + 1 === a ||
              (u = c.charCodeAt(f + 1)) < 56320 ||
              u > 57343
                ? t
                  ? c.charAt(f)
                  : o
                : t
                ? c.slice(f, f + 2)
                : u - 56320 + ((o - 55296) << 10) + 65536);
        };
      };
    },
    function (t, n, r) {
      var e = r(122),
        i = r(46);
      t.exports = function (t, n, r) {
        if (e(n)) throw TypeError("String#" + r + " doesn't accept regex!");
        return String(i(t));
      };
    },
    function (t, n, r) {
      "use strict";
      var e = r(67),
        i = r(46);
      t.exports = function (t) {
        var n = String(i(this)),
          r = "",
          o = e(t);
        if (o < 0 || o == 1 / 0) throw RangeError("Count can't be negative");
        for (; o > 0; (o >>>= 1) && (n += n)) 1 & o && (r += n);
        return r;
      };
    },
    function (t, n) {
      t.exports = "\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff";
    },
    function (t, n, r) {
      var e,
        i,
        o,
        u = r(53),
        c = r(121),
        f = r(135),
        a = r(132),
        s = r(3),
        l = s.process,
        h = s.setImmediate,
        v = s.clearImmediate,
        p = s.MessageChannel,
        d = 0,
        y = {},
        g = "onreadystatechange",
        b = function () {
          var t = +this;
          if (y.hasOwnProperty(t)) {
            var n = y[t];
            delete y[t], n();
          }
        },
        m = function (t) {
          b.call(t.data);
        };
      (h && v) ||
        ((h = function (t) {
          for (var n = [], r = 1; arguments.length > r; )
            n.push(arguments[r++]);
          return (
            (y[++d] = function () {
              c("function" == typeof t ? t : Function(t), n);
            }),
            e(d),
            d
          );
        }),
        (v = function (t) {
          delete y[t];
        }),
        "process" == r(45)(l)
          ? (e = function (t) {
              l.nextTick(u(b, t, 1));
            })
          : p
          ? ((i = new p()),
            (o = i.port2),
            (i.port1.onmessage = m),
            (e = u(o.postMessage, o, 1)))
          : s.addEventListener &&
            "function" == typeof postMessage &&
            !s.importScripts
          ? ((e = function (t) {
              s.postMessage(t + "", "*");
            }),
            s.addEventListener("message", m, !1))
          : (e =
              g in a("script")
                ? function (t) {
                    f.appendChild(a("script"))[g] = function () {
                      f.removeChild(this), b.call(t);
                    };
                  }
                : function (t) {
                    setTimeout(u(b, t, 1), 0);
                  })),
        (t.exports = { set: h, clear: v });
    },
    function (t, n, r) {
      "use strict";
      var e = r(3),
        i = r(10),
        o = r(69),
        u = r(127),
        c = r(27),
        f = r(73),
        a = r(4),
        s = r(68),
        l = r(67),
        h = r(16),
        v = r(71).f,
        p = r(11).f,
        d = r(130),
        y = r(81),
        g = "ArrayBuffer",
        b = "DataView",
        m = "prototype",
        x = "Wrong length!",
        w = "Wrong index!",
        S = e[g],
        _ = e[b],
        O = e.Math,
        E = e.RangeError,
        P = e.Infinity,
        j = S,
        F = O.abs,
        M = O.pow,
        A = O.floor,
        N = O.log,
        T = O.LN2,
        I = "buffer",
        k = "byteLength",
        L = "byteOffset",
        R = i ? "_b" : I,
        C = i ? "_l" : k,
        D = i ? "_o" : L,
        U = function (t, n, r) {
          var e,
            i,
            o,
            u = Array(r),
            c = 8 * r - n - 1,
            f = (1 << c) - 1,
            a = f >> 1,
            s = 23 === n ? M(2, -24) - M(2, -77) : 0,
            l = 0,
            h = t < 0 || (0 === t && 1 / t < 0) ? 1 : 0;
          for (
            t = F(t),
              t != t || t === P
                ? ((i = t != t ? 1 : 0), (e = f))
                : ((e = A(N(t) / T)),
                  t * (o = M(2, -e)) < 1 && (e--, (o *= 2)),
                  (t += e + a >= 1 ? s / o : s * M(2, 1 - a)),
                  t * o >= 2 && (e++, (o /= 2)),
                  e + a >= f
                    ? ((i = 0), (e = f))
                    : e + a >= 1
                    ? ((i = (t * o - 1) * M(2, n)), (e += a))
                    : ((i = t * M(2, a - 1) * M(2, n)), (e = 0)));
            n >= 8;
            u[l++] = 255 & i, i /= 256, n -= 8
          );
          for (
            e = (e << n) | i, c += n;
            c > 0;
            u[l++] = 255 & e, e /= 256, c -= 8
          );
          return (u[--l] |= 128 * h), u;
        },
        W = function (t, n, r) {
          var e,
            i = 8 * r - n - 1,
            o = (1 << i) - 1,
            u = o >> 1,
            c = i - 7,
            f = r - 1,
            a = t[f--],
            s = 127 & a;
          for (a >>= 7; c > 0; s = 256 * s + t[f], f--, c -= 8);
          for (
            e = s & ((1 << -c) - 1), s >>= -c, c += n;
            c > 0;
            e = 256 * e + t[f], f--, c -= 8
          );
          if (0 === s) s = 1 - u;
          else {
            if (s === o) return e ? NaN : a ? -P : P;
            (e += M(2, n)), (s -= u);
          }
          return (a ? -1 : 1) * e * M(2, s - n);
        },
        G = function (t) {
          return (t[3] << 24) | (t[2] << 16) | (t[1] << 8) | t[0];
        },
        B = function (t) {
          return [255 & t];
        },
        V = function (t) {
          return [255 & t, (t >> 8) & 255];
        },
        z = function (t) {
          return [255 & t, (t >> 8) & 255, (t >> 16) & 255, (t >> 24) & 255];
        },
        q = function (t) {
          return U(t, 52, 8);
        },
        K = function (t) {
          return U(t, 23, 4);
        },
        J = function (t, n, r) {
          p(t[m], n, {
            get: function () {
              return this[r];
            },
          });
        },
        Y = function (t, n, r, e) {
          var i = +r,
            o = l(i);
          if (i != o || o < 0 || o + n > t[C]) throw E(w);
          var u = t[R]._b,
            c = o + t[D],
            f = u.slice(c, c + n);
          return e ? f : f.reverse();
        },
        H = function (t, n, r, e, i, o) {
          var u = +r,
            c = l(u);
          if (u != c || c < 0 || c + n > t[C]) throw E(w);
          for (var f = t[R]._b, a = c + t[D], s = e(+i), h = 0; h < n; h++)
            f[a + h] = s[o ? h : n - h - 1];
        },
        $ = function (t, n) {
          s(t, S, g);
          var r = +n,
            e = h(r);
          if (r != e) throw E(x);
          return e;
        };
      if (u.ABV) {
        if (
          !a(function () {
            new S();
          }) ||
          !a(function () {
            new S(0.5);
          })
        ) {
          S = function (t) {
            return new j($(this, t));
          };
          for (var X, Q = (S[m] = j[m]), Z = v(j), tt = 0; Z.length > tt; )
            (X = Z[tt++]) in S || c(S, X, j[X]);
          o || (Q.constructor = S);
        }
        var nt = new _(new S(2)),
          rt = _[m].setInt8;
        nt.setInt8(0, 2147483648),
          nt.setInt8(1, 2147483649),
          (!nt.getInt8(0) && nt.getInt8(1)) ||
            f(
              _[m],
     